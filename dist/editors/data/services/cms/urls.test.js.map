{"version":3,"file":"urls.test.js","names":["_urls","require","describe","studioEndpointUrl","blockId","v2BlockId","learningContextId","libraryLearningContextId","courseId","libraryV1Id","libraryV2Id","language","handout","videoId","parameters","unitUrl","data","ancestors","id","it","expect","returnUrl","toEqual","libraryV1","unit","block","blockAncestor","blockStudioView","courseAssets","thumbnailUpload","videoTranscripts","downloadVideoTranscriptURL","downloadVideoHandoutUrl","courseDetailsUrl","checkTranscriptsForImport","replaceTranscript","courseAdvanceSettings","videoFeatures","courseVideos","transcriptUrl","mediaTranscriptURL"],"sources":["../../../../../src/editors/data/services/cms/urls.test.js"],"sourcesContent":["import {\n  returnUrl,\n  unit,\n  libraryV1,\n  block,\n  blockAncestor,\n  blockStudioView,\n  courseAssets,\n  thumbnailUpload,\n  downloadVideoTranscriptURL,\n  videoTranscripts,\n  downloadVideoHandoutUrl,\n  courseDetailsUrl,\n  checkTranscriptsForImport,\n  replaceTranscript,\n  courseAdvanceSettings,\n  mediaTranscriptURL,\n  videoFeatures,\n  courseVideos,\n} from './urls';\n\ndescribe('cms url methods', () => {\n  const studioEndpointUrl = 'urLgoeStOstudiO';\n  const blockId = 'block-v1-blOckIDTeST123';\n  const v2BlockId = 'lb:blOckIDTeST123';\n  const learningContextId = 'lEarnIngCOntextId123';\n  const libraryLearningContextId = 'library-v1:libaryId123';\n  const courseId = 'course-v1:courseId123';\n  const libraryV1Id = 'lib-block-v1:libaryId123';\n  const libraryV2Id = 'lib:libaryId123';\n  const language = 'la';\n  const handout = '/aSSet@hANdoUt';\n  const videoId = '123-SOmeVidEOid-213';\n  const parameters = 'SomEParAMEterS';\n\n  describe('return to learning context urls', () => {\n    const unitUrl = {\n      data: {\n        ancestors: [\n          {\n            id: 'unItUrlTEST',\n          },\n        ],\n      },\n    };\n    it('returns the library page when given the v1 library', () => {\n      expect(returnUrl({ studioEndpointUrl, unitUrl, learningContextId: libraryLearningContextId }))\n        .toEqual(`${studioEndpointUrl}/library/${libraryLearningContextId}`);\n    });\n    // it('throws error when given the v2 library', () => {\n    //   expect(() => { returnUrl({ studioEndpointUrl, unitUrl, learningContextId: libraryV2Id }); })\n    //     .toThrow('Return url not available (or needed) for V2 libraries');\n    // });\n    it('returns empty url when given the v2 library', () => {\n      expect(returnUrl({ studioEndpointUrl, unitUrl, learningContextId: libraryV2Id }))\n        .toEqual('');\n    });\n    it('returnUrl function should return url with studioEndpointUrl, unitUrl, and blockId', () => {\n      expect(returnUrl({\n        studioEndpointUrl, unitUrl, learningContextId: courseId, blockId,\n      }))\n        .toEqual(`${studioEndpointUrl}/container/${unitUrl.data.ancestors[0].id}#${blockId}`);\n    });\n    it('returns blank url for v2 block', () => {\n      expect(returnUrl({\n        studioEndpointUrl, unitUrl, learningContextId: courseId, blockId: v2BlockId,\n      }))\n        .toEqual('');\n    });\n    it('throws error if no unit url', () => {\n      expect(returnUrl({ studioEndpointUrl, unitUrl: null, learningContextId: courseId }))\n        .toEqual('');\n    });\n    it('returns the library page when given the library', () => {\n      expect(libraryV1({ studioEndpointUrl, learningContextId: libraryV1Id }))\n        .toEqual(`${studioEndpointUrl}/library/${libraryV1Id}`);\n    });\n    it('unit function should return url with studioEndpointUrl, unitUrl, and blockId', () => {\n      expect(unit({ studioEndpointUrl, unitUrl, blockId }))\n        .toEqual(`${studioEndpointUrl}/container/${unitUrl.data.ancestors[0].id}#${blockId}`);\n    });\n  });\n  describe('block', () => {\n    it('returns v1 url with studioEndpointUrl and blockId', () => {\n      expect(block({ studioEndpointUrl, blockId }))\n        .toEqual(`${studioEndpointUrl}/xblock/${blockId}`);\n    });\n    it('returns v2 url with studioEndpointUrl and v2BlockId', () => {\n      expect(block({ studioEndpointUrl, blockId: v2BlockId }))\n        .toEqual(`${studioEndpointUrl}/api/xblock/v2/xblocks/${v2BlockId}/fields/`);\n    });\n  });\n  describe('blockAncestor', () => {\n    it('returns url with studioEndpointUrl, blockId and ancestor query', () => {\n      expect(blockAncestor({ studioEndpointUrl, blockId }))\n        .toEqual(`${block({ studioEndpointUrl, blockId })}?fields=ancestorInfo`);\n    });\n    // This test will probably be used in the future\n    // it('throws error with studioEndpointUrl, v2 blockId and ancestor query', () => {\n    //   expect(() => { blockAncestor({ studioEndpointUrl, blockId: v2BlockId }); })\n    //     .toThrow('Block ancestor not available (and not needed) for V2 blocks');\n    // });\n    it('returns blank url with studioEndpointUrl, v2 blockId and ancestor query', () => {\n      expect(blockAncestor({ studioEndpointUrl, blockId: v2BlockId }))\n        .toEqual('');\n    });\n  });\n  describe('blockStudioView', () => {\n    it('returns v1 url with studioEndpointUrl, blockId and studio_view query', () => {\n      expect(blockStudioView({ studioEndpointUrl, blockId }))\n        .toEqual(`${block({ studioEndpointUrl, blockId })}/studio_view`);\n    });\n    it('returns v2 url with studioEndpointUrl, v2 blockId and studio_view query', () => {\n      expect(blockStudioView({ studioEndpointUrl, blockId: v2BlockId }))\n        .toEqual(`${studioEndpointUrl}/api/xblock/v2/xblocks/${v2BlockId}/view/studio_view/`);\n    });\n  });\n\n  describe('courseAssets', () => {\n    it('returns url with studioEndpointUrl and learningContextId', () => {\n      expect(courseAssets({ studioEndpointUrl, learningContextId }))\n        .toEqual(`${studioEndpointUrl}/assets/${learningContextId}/?page_size=500`);\n    });\n  });\n  describe('thumbnailUpload', () => {\n    it('returns url with studioEndpointUrl, learningContextId, and videoId', () => {\n      expect(thumbnailUpload({ studioEndpointUrl, learningContextId, videoId }))\n        .toEqual(`${studioEndpointUrl}/video_images/${learningContextId}/${videoId}`);\n    });\n  });\n  describe('videoTranscripts', () => {\n    it('returns url with studioEndpointUrl and blockId', () => {\n      expect(videoTranscripts({ studioEndpointUrl, blockId }))\n        .toEqual(`${block({ studioEndpointUrl, blockId })}/handler/studio_transcript/translation`);\n    });\n  });\n  describe('downloadVideoTranscriptURL', () => {\n    it('returns url with studioEndpointUrl, blockId and language query', () => {\n      expect(downloadVideoTranscriptURL({ studioEndpointUrl, blockId, language }))\n        .toEqual(`${videoTranscripts({ studioEndpointUrl, blockId })}?language_code=${language}`);\n    });\n  });\n  describe('downloadVideoHandoutUrl', () => {\n    it('returns url with studioEndpointUrl and handout', () => {\n      expect(downloadVideoHandoutUrl({ studioEndpointUrl, handout }))\n        .toEqual(`${studioEndpointUrl}${handout}`);\n    });\n  });\n  describe('courseDetailsUrl', () => {\n    it('returns url with studioEndpointUrl and courseKey', () => {\n      expect(courseDetailsUrl({ studioEndpointUrl, learningContextId }))\n        .toEqual(`${studioEndpointUrl}/settings/details/${learningContextId}`);\n    });\n  });\n  describe('checkTranscriptsForImport', () => {\n    it('returns url with studioEndpointUrl and parameters', () => {\n      expect(checkTranscriptsForImport({ studioEndpointUrl, parameters }))\n        .toEqual(`${studioEndpointUrl}/transcripts/check?data=${parameters}`);\n    });\n  });\n  describe('replaceTranscript', () => {\n    it('returns url with studioEndpointUrl and parameters', () => {\n      expect(replaceTranscript({ studioEndpointUrl, parameters }))\n        .toEqual(`${studioEndpointUrl}/transcripts/replace?data=${parameters}`);\n    });\n  });\n  describe('courseAdvanceSettings', () => {\n    it('returns url with studioEndpointUrl and learningContextId', () => {\n      expect(courseAdvanceSettings({ studioEndpointUrl, learningContextId }))\n        .toEqual(`${studioEndpointUrl}/api/contentstore/v0/advanced_settings/${learningContextId}`);\n    });\n  });\n  describe('videoFeatures', () => {\n    it('returns url with studioEndpointUrl and learningContextId', () => {\n      expect(videoFeatures({ studioEndpointUrl }))\n        .toEqual(`${studioEndpointUrl}/video_features/`);\n    });\n  });\n  describe('courseVideos', () => {\n    it('returns url with studioEndpointUrl and learningContextId', () => {\n      expect(courseVideos({ studioEndpointUrl, learningContextId }))\n        .toEqual(`${studioEndpointUrl}/videos/${learningContextId}`);\n    });\n  });\n  describe('mediaTranscriptURL', () => {\n    it('returns url with studioEndpointUrl', () => {\n      const transcriptUrl = 'this-is-a-transcript';\n      expect(mediaTranscriptURL({ studioEndpointUrl, transcriptUrl }))\n        .toEqual(`${studioEndpointUrl}${transcriptUrl}`);\n    });\n  });\n});\n"],"mappings":"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"}