{"version":3,"file":"VideoUploader.js","names":["_react","_interopRequireDefault","require","_propTypes","_i18n","_paragon","_icons","_reactRedux","_redux","hooks","_interopRequireWildcard","editorHooks","_messages","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","URLUploader","textInputValue","setTextInputValue","React","useState","onURLUpload","onVideoUpload","intl","useIntl","jsxs","className","children","jsx","style","backgroundColor","Icon","src","FileUpload","size","formatMessage","messages","dropVideoFileHere","fontSize","info","InputGroup","FormControl","placeholder","pasteURL","borderless","onClick","event","stopPropagation","onChange","target","value","IconButton","alt","submitButtonAltText","ArrowForward","iconAs","trim","VideoUploader","_ref","setLoading","onClose","dispatch","useDispatch","handleCancel","handleProcessUpload","_ref2","fileData","thunkActions","video","uploadVideo","supportedFiles","setLoadSpinner","postUploadRedirect","closeButtonAltText","Close","Dropzone","accept","onProcessUpload","inputComponent","exports","propTypes","PropTypes","func","isRequired","_default"],"sources":["../../../../src/editors/containers/VideoUploadEditor/VideoUploader.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from '@edx/frontend-platform/i18n';\nimport {\n  Icon, IconButton, Dropzone, InputGroup, FormControl,\n} from '@edx/paragon';\nimport { ArrowForward, FileUpload, Close } from '@edx/paragon/icons';\nimport { useDispatch } from 'react-redux';\nimport { thunkActions } from '../../data/redux';\nimport * as hooks from './hooks';\nimport * as editorHooks from '../EditorContainer/hooks';\nimport messages from './messages';\n\nconst URLUploader = () => {\n  const [textInputValue, setTextInputValue] = React.useState('');\n  const onURLUpload = hooks.onVideoUpload();\n  const intl = useIntl();\n  return (\n    <div className=\"d-flex flex-column\">\n      <div style={{ backgroundColor: '#F2F0EF' }} className=\"justify-content-center align-self-center rounded-circle p-5\">\n        <Icon src={FileUpload} className=\"text-muted\" size=\"lg\" />\n      </div>\n      <div className=\"d-flex align-self-center justify-content-center flex-wrap flex-column pt-5\">\n        <span className=\"small\">{intl.formatMessage(messages.dropVideoFileHere)}</span>\n        <span className=\"align-self-center\" style={{ fontSize: '0.8rem' }}>{intl.formatMessage(messages.info)}</span>\n      </div>\n      <div className=\"x-small align-self-center justify-content-center mx-2 text-dark font-weight-normal\">OR</div>\n      <div className=\"zindex-9 video-id-prompt p-4\">\n        <InputGroup className=\"video-upload-input-group\">\n          <FormControl\n            placeholder={intl.formatMessage(messages.pasteURL)}\n            aria-label={intl.formatMessage(messages.pasteURL)}\n            aria-describedby=\"basic-addon2\"\n            borderless\n            onClick={(event) => { event.stopPropagation(); }}\n            onChange={(event) => { setTextInputValue(event.target.value); }}\n          />\n          <div className=\"light-300 justify-content-center align-self-center bg-light rounded-circle p-0 x-small url-submit-button\">\n            <IconButton\n              className=\"text-muted\"\n              alt={intl.formatMessage(messages.submitButtonAltText)}\n              src={ArrowForward}\n              iconAs={Icon}\n              size=\"inline\"\n              onClick={(event) => {\n                event.stopPropagation();\n                if (textInputValue.trim() !== '') {\n                  onURLUpload(textInputValue);\n                }\n              }}\n            />\n          </div>\n        </InputGroup>\n      </div>\n    </div>\n  );\n};\n\nexport const VideoUploader = ({ setLoading, onClose }) => {\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const handleCancel = editorHooks.handleCancel({ onClose });\n\n  const handleProcessUpload = ({ fileData }) => {\n    dispatch(thunkActions.video.uploadVideo({\n      supportedFiles: [fileData],\n      setLoadSpinner: setLoading,\n      postUploadRedirect: hooks.onVideoUpload(),\n    }));\n  };\n\n  return (\n    <div className=\"d-flex flex-column\">\n      <div className=\"d-flex justify-content-end flex-row\">\n        <IconButton\n          className=\"position-absolute mr-2 mt-2\"\n          alt={intl.formatMessage(messages.closeButtonAltText)}\n          src={Close}\n          iconAs={Icon}\n          onClick={handleCancel}\n        />\n      </div>\n      <Dropzone\n        accept={{ 'video/*': ['.mp4', '.mov'] }}\n        onProcessUpload={handleProcessUpload}\n        inputComponent={<URLUploader />}\n      />\n    </div>\n  );\n};\n\nVideoUploader.propTypes = {\n  setLoading: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default VideoUploader;\n"],"mappings":"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"}