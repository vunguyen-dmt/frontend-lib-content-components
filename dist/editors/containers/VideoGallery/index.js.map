{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_paragon","_reactRedux","_redux","_hooks","_interopRequireDefault","_SelectionModal","_utils","_messages","_requests","_videoThumbnail","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","VideoGallery","rawVideos","useSelector","selectors","app","videos","isLoaded","state","requests","isFinished","requestKey","RequestKeys","fetchVideos","isFetchError","isFailed","isUploadError","uploadVideo","hooks","buildVideos","handleVideoUpload","useVideoUploadHandler","replace","useEffect","galleryError","inputError","fileInput","galleryProps","searchSortProps","selectBtnProps","useVideoProps","handleCancel","useCancelHandler","modalMessages","confirmMsg","messages","selectVideoButtonlabel","titleMsg","titleLabel","uploadButtonMsg","uploadButtonLabel","fetchError","fetchVideosError","uploadError","uploadVideoError","thumbnailFallback","jsx","Image","thumbnail","className","src","videoThumbnail","style","backgroundColor","children","isOpen","close","size","isFullscreenScroll","acceptedFiles","acceptedImgKeys","exports","propTypes","_default"],"sources":["../../../../src/editors/containers/VideoGallery/index.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Image } from '@openedx/paragon';\nimport { useSelector } from 'react-redux';\nimport { selectors } from '../../data/redux';\nimport hooks from './hooks';\nimport SelectionModal from '../../sharedComponents/SelectionModal';\nimport { acceptedImgKeys } from './utils';\nimport messages from './messages';\nimport { RequestKeys } from '../../data/constants/requests';\nimport videoThumbnail from '../../data/images/videoThumbnail.svg';\n\nexport const VideoGallery = () => {\n  const rawVideos = useSelector(selectors.app.videos);\n  const isLoaded = useSelector(\n    (state) => selectors.requests.isFinished(state, { requestKey: RequestKeys.fetchVideos }),\n  );\n  const isFetchError = useSelector(\n    (state) => selectors.requests.isFailed(state, { requestKey: RequestKeys.fetchVideos }),\n  );\n  const isUploadError = useSelector(\n    (state) => selectors.requests.isFailed(state, { requestKey: RequestKeys.uploadVideo }),\n  );\n  const videos = hooks.buildVideos({ rawVideos });\n  const handleVideoUpload = hooks.useVideoUploadHandler({ replace: true });\n\n  useEffect(() => {\n    // If no videos exists redirects to the video upload screen\n    if (isLoaded && videos.length === 0) {\n      handleVideoUpload();\n    }\n  }, [isLoaded]);\n  const {\n    galleryError,\n    inputError,\n    fileInput,\n    galleryProps,\n    searchSortProps,\n    selectBtnProps,\n  } = hooks.useVideoProps({ videos });\n  const handleCancel = hooks.useCancelHandler();\n\n  const modalMessages = {\n    confirmMsg: messages.selectVideoButtonlabel,\n    titleMsg: messages.titleLabel,\n    uploadButtonMsg: messages.uploadButtonLabel,\n    fetchError: messages.fetchVideosError,\n    uploadError: messages.uploadVideoError,\n  };\n\n  const thumbnailFallback = (\n    <Image\n      thumbnail\n      className=\"px-6 py-4.5 h-100\"\n      src={videoThumbnail}\n    />\n  );\n\n  return (\n    <div style={isLoaded ? { backgroundColor: '#E9E6E4' } : {}}>\n      <SelectionModal\n        {...{\n          isOpen: true,\n          close: handleCancel,\n          size: 'fullscreen',\n          isFullscreenScroll: false,\n          galleryError,\n          inputError,\n          fileInput,\n          galleryProps: {\n            ...galleryProps,\n            thumbnailFallback,\n          },\n          searchSortProps,\n          selectBtnProps,\n          acceptedFiles: acceptedImgKeys,\n          modalMessages,\n          isLoaded,\n          isUploadError,\n          isFetchError,\n        }}\n      />\n    </div>\n  );\n};\n\nVideoGallery.propTypes = {};\n\nexport default VideoGallery;\n"],"mappings":"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"}