{"version":3,"file":"embedIframePlugin.js","names":["tinyMCEEmbedIframePlugin","editor","openInsertIframeModal","defaultConfig","title","body","type","tabs","items","name","label","multiline","autofocus","required","text","value","checked","buttons","primary","onChange","api","field","data","getData","sizeType","fields","_objectWithoutProperties","_excluded","isSizeTypeFiled","hasCustomSize","generalTab","filter","item","initialData","_objectSpread","redial","hasSizeInput","some","onSubmit","sizeTypes","small","height","width","big","source","size","longDescriptionURL","border","scrollbar","pxRegex","widthFormat","test","heightFormat","hasScroll","iframeCode","insertContent","close","windowManager","open","ui","registry","addButton","onAction","tinymce","PluginManager","add","window","_default","exports","default"],"sources":["../../../../../src/editors/sharedComponents/TinyMceWidget/customTinyMcePlugins/embedIframePlugin.js"],"sourcesContent":["function tinyMCEEmbedIframePlugin(editor) {\n  function openInsertIframeModal() {\n    const defaultConfig = {\n      title: 'Insert iframe',\n      body: {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            items: [\n              {\n                type: 'input',\n                name: 'source',\n                label: 'Source URL',\n                multiline: false,\n                autofocus: true,\n                required: true,\n              },\n              {\n                type: 'selectbox',\n                name: 'sizeType',\n                label: 'Size',\n                items: [\n                  { text: 'Inline Value', value: 'inline' },\n                  { text: 'Big embed', value: 'big' },\n                  { text: 'Small embed', value: 'small' },\n                ],\n              },\n\n              {\n                type: 'sizeinput',\n                name: 'size',\n                label: 'Dimensions',\n              },\n            ],\n          },\n          {\n            title: 'Advanced',\n            items: [\n              {\n                type: 'input',\n                name: 'name',\n                label: 'Name',\n                value: '',\n              },\n              {\n                type: 'input',\n                name: 'title',\n                label: 'Title',\n                value: '',\n              },\n              {\n                type: 'input',\n                name: 'longDescriptionURL',\n                label: 'Long description URL',\n                value: '',\n              },\n              {\n                type: 'checkbox',\n                name: 'border',\n                label: 'Show iframe border',\n                text: 'Border',\n                checked: false,\n              },\n              {\n                type: 'checkbox',\n                name: 'scrollbar',\n                label: 'Enable scrollbar',\n                text: 'Scrollbar',\n                checked: false,\n              },\n            ],\n          },\n        ],\n      },\n      buttons: [\n        {\n          type: 'cancel',\n          name: 'cancel',\n          text: 'Cancel',\n        },\n        {\n          type: 'submit',\n          name: 'save',\n          text: 'Save',\n          primary: true,\n        },\n      ],\n      onChange(api, field) {\n        const { name } = field;\n        const data = api.getData();\n        const { sizeType, ...fields } = data;\n        const isSizeTypeFiled = name === 'sizeType';\n        const hasCustomSize = sizeType === 'inline';\n\n        if (!hasCustomSize && isSizeTypeFiled) {\n          const {\n            body: {\n              tabs: [generalTab],\n            },\n          } = defaultConfig;\n\n          generalTab.items = generalTab.items.filter(\n            (item) => item.type !== 'sizeinput',\n          );\n\n          defaultConfig.initialData = { ...fields, sizeType };\n          api.redial(defaultConfig);\n        }\n\n        if (hasCustomSize && isSizeTypeFiled) {\n          const {\n            body: {\n              tabs: [generalTab],\n            },\n          } = defaultConfig;\n\n          const hasSizeInput = generalTab.items.some((item) => item.name === 'size');\n\n          if (!hasSizeInput) {\n            generalTab.items = [\n              ...generalTab.items,\n              {\n                type: 'sizeinput',\n                name: 'size',\n                label: 'Dimensions',\n              },\n            ];\n          }\n\n          defaultConfig.initialData = { ...fields, sizeType };\n          api.redial(defaultConfig);\n        }\n      },\n      onSubmit(api) {\n        const data = api.getData();\n        const sizeTypes = {\n          small: {\n            height: '100px',\n            width: '100px',\n          },\n          big: {\n            height: '800px',\n            width: '800px',\n          },\n        };\n        if (data.source) {\n          const {\n            size, sizeType, name, title, longDescriptionURL, border, scrollbar,\n          } = data;\n          const { width, height } = sizeTypes[sizeType] || { width: size.width, height: size.height };\n\n          const pxRegex = /^\\d+px$/;\n          const widthFormat = pxRegex.test(width) ? width : '300px';\n          const heightFormat = pxRegex.test(height) ? height : '300px';\n          const hasScroll = scrollbar ? 'yes' : 'no';\n\n          let iframeCode = `<iframe src=\"${data.source}\" width=\"${widthFormat}\" height=\"${heightFormat}\" scrolling=\"${hasScroll}\"`;\n\n          if (name) {\n            iframeCode += ` name=\"${name}\"`;\n          }\n\n          if (title) {\n            iframeCode += ` title=\"${title}\"`;\n          }\n\n          if (longDescriptionURL) {\n            iframeCode += ` longdesc=\"${longDescriptionURL}\"`;\n          }\n\n          if (!border) {\n            iframeCode += 'frameborder=\"0\"';\n          }\n\n          iframeCode += '></iframe>';\n\n          iframeCode = `<div class=\"tiny-pageembed\" style=\"width: ${widthFormat}; height: ${heightFormat}\">`\n            + `${iframeCode}`\n            + '</div>';\n\n          editor.insertContent(iframeCode);\n        }\n\n        api.close();\n      },\n    };\n\n    editor.windowManager.open(defaultConfig);\n  }\n\n  // Register the button\n  editor.ui.registry.addButton('embediframe', {\n    text: 'Embed iframe',\n    onAction: openInsertIframeModal,\n  });\n}\n\n((tinymce) => {\n  if (tinymce) {\n    tinymce.PluginManager.add('embediframe', tinyMCEEmbedIframePlugin);\n  }\n})(window.tinymce);\n\nexport default tinyMCEEmbedIframePlugin;\n"],"mappings":"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"}