{"version":3,"file":"hooks.js","names":["_react","require","_problem","_utils","_module","_interopRequireWildcard","_problem2","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","state","exports","StrictDict","selected","val","useState","selectHooks","setSelected","module","ProblemTypeKeys","SINGLESELECT","onSelect","_ref","updateField","setBlockTitle","defaultSettings","values","AdvanceProblemKeys","includes","problemType","ADVANCED","rawOLX","AdvanceProblems","template","title","newOLX","ProblemTypes","newState","getDataFromOlx","rawSettings","weight","attempts_before_showanswer_button","show_reset_button","showanswer","snakeCaseKeys","useArrowNav","detectKeyDown","problemTypeValues","key","prev","document","getElementById","focus","next","useEffect","addEventListener","removeEventListener","_default"],"sources":["../../../../../../src/editors/containers/ProblemEditor/components/SelectTypeModal/hooks.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport {\n  AdvanceProblemKeys, AdvanceProblems, ProblemTypeKeys, ProblemTypes,\n} from '../../../../data/constants/problem';\nimport { StrictDict, snakeCaseKeys } from '../../../../utils';\nimport * as module from './hooks';\nimport { getDataFromOlx } from '../../../../data/redux/thunkActions/problem';\n\nexport const state = StrictDict({\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  selected: (val) => useState(val),\n});\n\nexport const selectHooks = () => {\n  const [selected, setSelected] = module.state.selected(ProblemTypeKeys.SINGLESELECT);\n  return {\n    selected,\n    setSelected,\n  };\n};\n\nexport const onSelect = ({\n  selected,\n  updateField,\n  setBlockTitle,\n  defaultSettings,\n}) => () => {\n  if (Object.values(AdvanceProblemKeys).includes(selected)) {\n    updateField({ problemType: ProblemTypeKeys.ADVANCED, rawOLX: AdvanceProblems[selected].template });\n    setBlockTitle(AdvanceProblems[selected].title);\n  } else {\n    const newOLX = ProblemTypes[selected].template;\n    const newState = getDataFromOlx({\n      rawOLX: newOLX,\n      rawSettings: {\n        weight: 1,\n        attempts_before_showanswer_button: 0,\n        show_reset_button: null,\n        showanswer: null,\n      },\n      defaultSettings: snakeCaseKeys(defaultSettings),\n    });\n    updateField(newState);\n    setBlockTitle(ProblemTypes[selected].title);\n  }\n};\n\nexport const useArrowNav = (selected, setSelected) => {\n  const detectKeyDown = (e) => {\n    const problemTypeValues = Object.values(ProblemTypeKeys);\n    switch (e.key) {\n      case 'ArrowUp':\n        if (problemTypeValues.includes(selected) && ProblemTypes[selected].prev) {\n          setSelected(ProblemTypes[selected].prev);\n          document.getElementById(ProblemTypes[selected].prev).focus();\n        }\n        break;\n      case 'ArrowDown':\n        if (problemTypeValues.includes(selected) && ProblemTypes[selected].next) {\n          setSelected(ProblemTypes[selected].next);\n          document.getElementById(ProblemTypes[selected].next).focus();\n        }\n        break;\n      default:\n    }\n  };\n  useEffect(() => {\n    document.addEventListener('keydown', detectKeyDown, true);\n    return () => {\n      document.removeEventListener('keydown', detectKeyDown, true);\n    };\n  }, [selected, setSelected]);\n};\n\nexport default {\n  state,\n  selectHooks,\n  onSelect,\n  useArrowNav,\n};\n"],"mappings":"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"}