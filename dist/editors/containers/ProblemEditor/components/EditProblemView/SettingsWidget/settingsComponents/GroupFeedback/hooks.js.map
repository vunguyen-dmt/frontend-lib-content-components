{"version":3,"file":"hooks.js","names":["_react","require","_lodashEs","_interopRequireDefault","_messages","_module","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","state","exports","summary","val","useState","groupFeedbackCardHooks","groupFeedbacks","updateSettings","answerslist","setSummary","module","message","messages","noGroupFeedbackSummary","values","useEffect","feedbacksInList","map","_ref","answers","feedback","answerIDs","a","id","answersString","includes","groupFeedbackSummary","groupFeedback","handleAdd","newId","_","isEmpty","Math","max","modifiedGroupFeedbacks","groupFeedbackList","groupFeedbackRowHooks","_ref2","addSelectedAnswer","_ref3","oldGroupFeedback","find","x","newAnswers","newFeedback","remainingFeedbacks","item","updatedFeedbackList","sort","b","removedSelectedAnswer","_ref4","handleAnswersSelectedChange","event","checked","handleDelete","handleFeedbackChange","modifiedGroupFeedback"],"sources":["../../../../../../../../../src/editors/containers/ProblemEditor/components/EditProblemView/SettingsWidget/settingsComponents/GroupFeedback/hooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport _ from 'lodash-es';\nimport messages from './messages';\nimport * as module from './hooks';\n\nexport const state = {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  summary: (val) => useState(val),\n};\n\nexport const groupFeedbackCardHooks = (groupFeedbacks, updateSettings, answerslist) => {\n  const [summary, setSummary] = module.state.summary({ message: messages.noGroupFeedbackSummary, values: {} });\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useEffect(() => {\n    if (groupFeedbacks.length === 0) {\n      setSummary({ message: messages.noGroupFeedbackSummary, values: {} });\n    } else {\n      const feedbacksInList = groupFeedbacks.map(({ answers, feedback }) => {\n        const answerIDs = answerslist.map((a) => a.id);\n        const answersString = answers.filter((value) => answerIDs.includes(value));\n        return `${answersString} ${feedback}\\n`;\n      });\n      setSummary({\n        message: messages.groupFeedbackSummary,\n        values: { groupFeedback: feedbacksInList },\n      });\n    }\n  }, [groupFeedbacks, answerslist]);\n\n  const handleAdd = () => {\n    let newId = 0;\n    if (!_.isEmpty(groupFeedbacks)) {\n      newId = Math.max(...groupFeedbacks.map(feedback => feedback.id)) + 1;\n    }\n    const groupFeedback = { id: newId, answers: [], feedback: '' };\n    const modifiedGroupFeedbacks = [...groupFeedbacks, groupFeedback];\n    updateSettings({ groupFeedbackList: modifiedGroupFeedbacks });\n  };\n\n  return {\n    summary,\n    handleAdd,\n  };\n};\n\nexport const groupFeedbackRowHooks = ({ id, groupFeedbacks, updateSettings }) => {\n  // Hooks for the answers associated with a groupfeedback\n  const addSelectedAnswer = ({ value }) => {\n    const oldGroupFeedback = groupFeedbacks.find(x => x.id === id);\n    const newAnswers = [...oldGroupFeedback.answers, value];\n    const newFeedback = { ...oldGroupFeedback, answers: newAnswers };\n    const remainingFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    const updatedFeedbackList = [newFeedback, ...remainingFeedbacks].sort((a, b) => a.id - b.id);\n\n    updateSettings({ groupFeedbackList: updatedFeedbackList });\n  };\n  const removedSelectedAnswer = ({ value }) => {\n    const oldGroupFeedback = groupFeedbacks.find(x => x.id === id);\n    const newAnswers = oldGroupFeedback.answers.filter(item => item !== value);\n    const newFeedback = { ...oldGroupFeedback, answers: newAnswers };\n    const remainingFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    const updatedFeedbackList = [newFeedback, ...remainingFeedbacks].sort((a, b) => a.id - b.id);\n\n    updateSettings({ groupFeedbackList: updatedFeedbackList });\n  };\n  const handleAnswersSelectedChange = (event) => {\n    const { checked, value } = event.target;\n    if (checked) {\n      addSelectedAnswer({ value });\n    } else {\n      removedSelectedAnswer({ value });\n    }\n  };\n\n  // Delete Button\n  const handleDelete = () => {\n    const modifiedGroupFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    updateSettings({ groupFeedbackList: modifiedGroupFeedbacks });\n  };\n\n  // Hooks for the feedback associated with a groupfeedback\n  const handleFeedbackChange = (event) => {\n    const { value } = event.target;\n    const modifiedGroupFeedback = groupFeedbacks.map(groupFeedback => {\n      if (groupFeedback.id === id) {\n        return { ...groupFeedback, feedback: value };\n      }\n      return groupFeedback;\n    });\n    updateSettings({ groupFeedbackList: modifiedGroupFeedback });\n  };\n\n  return {\n    handleAnswersSelectedChange, handleFeedbackChange, handleDelete,\n  };\n};\n"],"mappings":"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"}