{"version":3,"file":"index.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_tinymceReact","_store","_redux","_ImageUploadModal","_SourceCodeModal","hooks","_interopRequireWildcard","_jsxRuntime","_excluded","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","editorConfigDefaultProps","setEditorRef","placeholder","initializeEditor","updateContent","content","minHeight","editorConfigPropTypes","PropTypes","func","any","TinyMceWidget","_ref","editorType","editorRef","disabled","id","editorContentHtml","assets","isLibrary","lmsEndpointUrl","studioEndpointUrl","onChange","editorConfig","isImgOpen","openImgModal","closeImgModal","imgModalToggle","isSourceCodeOpen","openSourceCodeModal","closeSourceCodeModal","sourceCodeModalToggle","imagesRef","useImages","imageSelection","selectedImage","jsxs","Provider","store","children","jsx","isOpen","close","images","Editor","onEditorChange","exports","defaultProps","propTypes","string","bool","shape","mapStateToProps","state","selectors","app","_default","connect"],"sources":["../../../../src/editors/sharedComponents/TinyMceWidget/index.jsx"],"sourcesContent":["import React from 'react';\nimport { Provider, connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Editor } from '@tinymce/tinymce-react';\n\nimport 'tinymce';\nimport 'tinymce/themes/silver';\nimport 'tinymce/skins/ui/oxide/skin.css';\nimport 'tinymce/icons/default';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/hr';\nimport 'tinymce/plugins/codesample';\nimport 'tinymce/plugins/emoticons';\nimport 'tinymce/plugins/emoticons/js/emojis';\nimport 'tinymce/plugins/charmap';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/autoresize';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/imagetools';\nimport 'tinymce/plugins/quickbars';\n\nimport store from '../../data/store';\nimport { selectors } from '../../data/redux';\nimport ImageUploadModal from '../ImageUploadModal';\nimport SourceCodeModal from '../SourceCodeModal';\nimport * as hooks from './hooks';\n\nconst editorConfigDefaultProps = {\n  setEditorRef: undefined,\n  placeholder: undefined,\n  initializeEditor: undefined,\n  updateContent: undefined,\n  content: undefined,\n  minHeight: undefined,\n};\n\nconst editorConfigPropTypes = {\n  setEditorRef: PropTypes.func,\n  placeholder: PropTypes.any,\n  initializeEditor: PropTypes.func,\n  updateContent: PropTypes.func,\n  content: PropTypes.any,\n  minHeight: PropTypes.any,\n};\n\nexport const TinyMceWidget = ({\n  editorType,\n  editorRef,\n  disabled,\n  id,\n  editorContentHtml, // editorContent in html form\n  // redux\n  assets,\n  isLibrary,\n  lmsEndpointUrl,\n  studioEndpointUrl,\n  onChange,\n  ...editorConfig\n}) => {\n  const { isImgOpen, openImgModal, closeImgModal } = hooks.imgModalToggle();\n  const { isSourceCodeOpen, openSourceCodeModal, closeSourceCodeModal } = hooks.sourceCodeModalToggle(editorRef);\n  const { imagesRef } = hooks.useImages({ assets, editorContentHtml });\n\n  const imageSelection = hooks.selectedImage(null);\n\n  return (\n    <Provider store={store}>\n      {isLibrary ? null : (\n        <ImageUploadModal\n          isOpen={isImgOpen}\n          close={closeImgModal}\n          editorRef={editorRef}\n          images={imagesRef}\n          editorType={editorType}\n          lmsEndpointUrl={lmsEndpointUrl}\n          {...imageSelection}\n        />\n      )}\n      {editorType === 'text' ? (\n        <SourceCodeModal\n          isOpen={isSourceCodeOpen}\n          close={closeSourceCodeModal}\n          editorRef={editorRef}\n        />\n      ) : null}\n      <Editor\n        id={id}\n        disabled={disabled}\n        onEditorChange={onChange}\n        {\n          ...hooks.editorConfig({\n            openImgModal,\n            openSourceCodeModal,\n            editorType,\n            editorRef,\n            isLibrary,\n            lmsEndpointUrl,\n            studioEndpointUrl,\n            images: imagesRef,\n            editorContentHtml,\n            ...imageSelection,\n            ...editorConfig,\n          })\n        }\n      />\n    </Provider>\n  );\n};\nTinyMceWidget.defaultProps = {\n  isLibrary: null,\n  editorType: null,\n  editorRef: null,\n  lmsEndpointUrl: null,\n  studioEndpointUrl: null,\n  assets: null,\n  id: null,\n  disabled: false,\n  editorContentHtml: undefined,\n  updateContent: undefined,\n  onChange: () => ({}),\n  ...editorConfigDefaultProps,\n};\nTinyMceWidget.propTypes = {\n  editorType: PropTypes.string,\n  isLibrary: PropTypes.bool,\n  assets: PropTypes.shape({}),\n  editorRef: PropTypes.shape({}),\n  lmsEndpointUrl: PropTypes.string,\n  studioEndpointUrl: PropTypes.string,\n  id: PropTypes.string,\n  disabled: PropTypes.bool,\n  editorContentHtml: PropTypes.string,\n  updateContent: PropTypes.func,\n  onChange: PropTypes.func,\n  ...editorConfigPropTypes,\n};\n\nexport const mapStateToProps = (state) => ({\n  assets: selectors.app.assets(state),\n  lmsEndpointUrl: selectors.app.lmsEndpointUrl(state),\n  studioEndpointUrl: selectors.app.studioEndpointUrl(state),\n  isLibrary: selectors.app.isLibrary(state),\n});\n\nexport default (connect(mapStateToProps)(TinyMceWidget));\n"],"mappings":"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"}