{"version":3,"file":"index.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_paragon","_i18n","_redux","_requests","_EditorContainer","_RawEditor","hooks","_interopRequireWildcard","_messages","_TinyMceWidget","_hooks2","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","TextEditor","_ref","onClose","returnFunction","isRaw","blockValue","blockFailed","initializeEditor","assetsFinished","assets","intl","editorRef","refReady","setEditorRef","prepareEditorRef","selectEditor","jsx","content","editorType","editorContentHtml","data","minHeight","height","getContent","children","jsxs","className","Toast","show","nullMethod","FormattedMessage","messages","couldNotLoadTextContext","Spinner","animation","screenreadertext","formatMessage","spinnerScreenReaderText","exports","defaultProps","propTypes","PropTypes","func","isRequired","shape","string","bool","intlShape","mapStateToProps","state","selectors","app","requests","isFailed","requestKey","RequestKeys","fetchBlock","isFinished","fetchAssets","mapDispatchToProps","actions","_default","injectIntl","connect"],"sources":["../../../../src/editors/containers/TextEditor/index.jsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport {\n  Spinner,\n  Toast,\n} from '@edx/paragon';\nimport { FormattedMessage, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\n\nimport { actions, selectors } from '../../data/redux';\nimport { RequestKeys } from '../../data/constants/requests';\n\nimport EditorContainer from '../EditorContainer';\nimport RawEditor from '../../sharedComponents/RawEditor';\nimport * as hooks from './hooks';\nimport messages from './messages';\nimport TinyMceWidget from '../../sharedComponents/TinyMceWidget';\nimport { prepareEditorRef } from '../../sharedComponents/TinyMceWidget/hooks';\n\nexport const TextEditor = ({\n  onClose,\n  returnFunction,\n  // redux\n  isRaw,\n  blockValue,\n  blockFailed,\n  initializeEditor,\n  assetsFinished,\n  assets,\n  // inject\n  intl,\n}) => {\n  const { editorRef, refReady, setEditorRef } = prepareEditorRef();\n\n  if (!refReady) { return null; }\n\n  const selectEditor = () => {\n    if (isRaw) {\n      return (\n        <RawEditor\n          editorRef={editorRef}\n          content={blockValue}\n        />\n      );\n    }\n    return (\n      <TinyMceWidget\n        editorType=\"text\"\n        editorRef={editorRef}\n        editorContentHtml={blockValue ? blockValue.data.data : ''}\n        setEditorRef={setEditorRef}\n        minHeight={500}\n        height=\"100%\"\n        initializeEditor={initializeEditor}\n      />\n    );\n  };\n\n  return (\n    <EditorContainer\n      getContent={hooks.getContent({ editorRef, isRaw, assets })}\n      onClose={onClose}\n      returnFunction={returnFunction}\n    >\n      <div className=\"editor-body h-75 overflow-auto\">\n        <Toast show={blockFailed} onClose={hooks.nullMethod}>\n          <FormattedMessage {...messages.couldNotLoadTextContext} />\n        </Toast>\n\n        {(!assetsFinished)\n          ? (\n            <div className=\"text-center p-6\">\n              <Spinner\n                animation=\"border\"\n                className=\"m-3\"\n                screenreadertext={intl.formatMessage(messages.spinnerScreenReaderText)}\n              />\n            </div>\n          ) : (selectEditor())}\n      </div>\n    </EditorContainer>\n  );\n};\nTextEditor.defaultProps = {\n  blockValue: null,\n  isRaw: null,\n  assetsFinished: null,\n  assets: null,\n  returnFunction: null,\n};\nTextEditor.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  returnFunction: PropTypes.func,\n  // redux\n  blockValue: PropTypes.shape({\n    data: PropTypes.shape({ data: PropTypes.string }),\n  }),\n  blockFailed: PropTypes.bool.isRequired,\n  initializeEditor: PropTypes.func.isRequired,\n  isRaw: PropTypes.bool,\n  assetsFinished: PropTypes.bool,\n  assets: PropTypes.shape({}),\n  // inject\n  intl: intlShape.isRequired,\n};\n\nexport const mapStateToProps = (state) => ({\n  blockValue: selectors.app.blockValue(state),\n  blockFailed: selectors.requests.isFailed(state, { requestKey: RequestKeys.fetchBlock }),\n  isRaw: selectors.app.isRaw(state),\n  assetsFinished: selectors.requests.isFinished(state, { requestKey: RequestKeys.fetchAssets }),\n  assets: selectors.app.assets(state),\n});\n\nexport const mapDispatchToProps = {\n  initializeEditor: actions.app.initializeEditor,\n};\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(TextEditor));\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEA,IAAAG,QAAA,GAAAH,OAAA;AAIA,IAAAI,KAAA,GAAAJ,OAAA;AAEA,IAAAK,MAAA,GAAAL,OAAA;AACA,IAAAM,SAAA,GAAAN,OAAA;AAEA,IAAAO,gBAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,UAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,KAAA,GAAAC,uBAAA,CAAAV,OAAA;AACA,IAAAW,SAAA,GAAAZ,sBAAA,CAAAC,OAAA;AACA,IAAAY,cAAA,GAAAb,sBAAA,CAAAC,OAAA;AACA,IAAAa,OAAA,GAAAb,OAAA;AAA8E,IAAAc,WAAA,GAAAd,OAAA;AAAA,SAAAe,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAN,wBAAAU,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAAA,SAAA3B,uBAAAqB,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAiB,QAAAC,MAAA,EAAAC,cAAA,QAAAC,IAAA,GAAAZ,MAAA,CAAAY,IAAA,CAAAF,MAAA,OAAAV,MAAA,CAAAa,qBAAA,QAAAC,OAAA,GAAAd,MAAA,CAAAa,qBAAA,CAAAH,MAAA,GAAAC,cAAA,KAAAG,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAAhB,MAAA,CAAAE,wBAAA,CAAAQ,MAAA,EAAAM,GAAA,EAAAC,UAAA,OAAAL,IAAA,CAAAM,IAAA,CAAAC,KAAA,CAAAP,IAAA,EAAAE,OAAA,YAAAF,IAAA;AAAA,SAAAQ,cAAAC,MAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAF,CAAA,UAAAG,MAAA,WAAAF,SAAA,CAAAD,CAAA,IAAAC,SAAA,CAAAD,CAAA,QAAAA,CAAA,OAAAb,OAAA,CAAAT,MAAA,CAAAyB,MAAA,OAAAC,OAAA,WAAAvB,GAAA,IAAAwB,eAAA,CAAAN,MAAA,EAAAlB,GAAA,EAAAsB,MAAA,CAAAtB,GAAA,SAAAH,MAAA,CAAA4B,yBAAA,GAAA5B,MAAA,CAAA6B,gBAAA,CAAAR,MAAA,EAAArB,MAAA,CAAA4B,yBAAA,CAAAH,MAAA,KAAAhB,OAAA,CAAAT,MAAA,CAAAyB,MAAA,GAAAC,OAAA,WAAAvB,GAAA,IAAAH,MAAA,CAAAC,cAAA,CAAAoB,MAAA,EAAAlB,GAAA,EAAAH,MAAA,CAAAE,wBAAA,CAAAuB,MAAA,EAAAtB,GAAA,iBAAAkB,MAAA;AAAA,SAAAM,gBAAAnC,GAAA,EAAAW,GAAA,EAAA2B,KAAA,IAAA3B,GAAA,GAAA4B,cAAA,CAAA5B,GAAA,OAAAA,GAAA,IAAAX,GAAA,IAAAQ,MAAA,CAAAC,cAAA,CAAAT,GAAA,EAAAW,GAAA,IAAA2B,KAAA,EAAAA,KAAA,EAAAb,UAAA,QAAAe,YAAA,QAAAC,QAAA,oBAAAzC,GAAA,CAAAW,GAAA,IAAA2B,KAAA,WAAAtC,GAAA;AAAA,SAAAuC,eAAAG,GAAA,QAAA/B,GAAA,GAAAgC,YAAA,CAAAD,GAAA,2BAAA/B,GAAA,gBAAAA,GAAA,GAAAiC,MAAA,CAAAjC,GAAA;AAAA,SAAAgC,aAAAE,KAAA,EAAAC,IAAA,eAAAD,KAAA,iBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAjC,IAAA,CAAA+B,KAAA,EAAAC,IAAA,2BAAAK,GAAA,sBAAAA,GAAA,YAAAC,SAAA,4DAAAN,IAAA,gBAAAF,MAAA,GAAAS,MAAA,EAAAR,KAAA;AAEvE,MAAMS,UAAU,GAAGC,IAAA,IAYpB;EAAA,IAZqB;IACzBC,OAAO;IACPC,cAAc;IACd;IACAC,KAAK;IACLC,UAAU;IACVC,WAAW;IACXC,gBAAgB;IAChBC,cAAc;IACdC,MAAM;IACN;IACAC;EACF,CAAC,GAAAT,IAAA;EACC,MAAM;IAAEU,SAAS;IAAEC,QAAQ;IAAEC;EAAa,CAAC,GAAG,IAAAC,wBAAgB,EAAC,CAAC;EAEhE,IAAI,CAACF,QAAQ,EAAE;IAAE,OAAO,IAAI;EAAE;EAE9B,MAAMG,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIX,KAAK,EAAE;MACT,oBACE,IAAAhE,WAAA,CAAA4E,GAAA,EAAClF,UAAA,CAAAc,OAAS;QACR+D,SAAS,EAAEA,SAAU;QACrBM,OAAO,EAAEZ;MAAW,CACrB,CAAC;IAEN;IACA,oBACE,IAAAjE,WAAA,CAAA4E,GAAA,EAAC9E,cAAA,CAAAU,OAAa;MACZsE,UAAU,EAAC,MAAM;MACjBP,SAAS,EAAEA,SAAU;MACrBQ,iBAAiB,EAAEd,UAAU,GAAGA,UAAU,CAACe,IAAI,CAACA,IAAI,GAAG,EAAG;MAC1DP,YAAY,EAAEA,YAAa;MAC3BQ,SAAS,EAAE,GAAI;MACfC,MAAM,EAAC,MAAM;MACbf,gBAAgB,EAAEA;IAAiB,CACpC,CAAC;EAEN,CAAC;EAED,oBACE,IAAAnE,WAAA,CAAA4E,GAAA,EAACnF,gBAAA,CAAAe,OAAe;IACd2E,UAAU,EAAExF,KAAK,CAACwF,UAAU,CAAC;MAAEZ,SAAS;MAAEP,KAAK;MAAEK;IAAO,CAAC,CAAE;IAC3DP,OAAO,EAAEA,OAAQ;IACjBC,cAAc,EAAEA,cAAe;IAAAqB,QAAA,eAE/B,IAAApF,WAAA,CAAAqF,IAAA;MAAKC,SAAS,EAAC,gCAAgC;MAAAF,QAAA,gBAC7C,IAAApF,WAAA,CAAA4E,GAAA,EAACvF,QAAA,CAAAkG,KAAK;QAACC,IAAI,EAAEtB,WAAY;QAACJ,OAAO,EAAEnE,KAAK,CAAC8F,UAAW;QAAAL,QAAA,eAClD,IAAApF,WAAA,CAAA4E,GAAA,EAACtF,KAAA,CAAAoG,gBAAgB,EAAAxD,aAAA,KAAKyD,iBAAQ,CAACC,uBAAuB,CAAG;MAAC,CACrD,CAAC,EAEN,CAACxB,cAAc,gBAEb,IAAApE,WAAA,CAAA4E,GAAA;QAAKU,SAAS,EAAC,iBAAiB;QAAAF,QAAA,eAC9B,IAAApF,WAAA,CAAA4E,GAAA,EAACvF,QAAA,CAAAwG,OAAO;UACNC,SAAS,EAAC,QAAQ;UAClBR,SAAS,EAAC,KAAK;UACfS,gBAAgB,EAAEzB,IAAI,CAAC0B,aAAa,CAACL,iBAAQ,CAACM,uBAAuB;QAAE,CACxE;MAAC,CACC,CAAC,GACHtB,YAAY,CAAC,CAAE;IAAA,CACnB;EAAC,CACS,CAAC;AAEtB,CAAC;AAACuB,OAAA,CAAAtC,UAAA,GAAAA,UAAA;AACFA,UAAU,CAACuC,YAAY,GAAG;EACxBlC,UAAU,EAAE,IAAI;EAChBD,KAAK,EAAE,IAAI;EACXI,cAAc,EAAE,IAAI;EACpBC,MAAM,EAAE,IAAI;EACZN,cAAc,EAAE;AAClB,CAAC;AACDH,UAAU,CAACwC,SAAS,GAAG;EACrBtC,OAAO,EAAEuC,kBAAS,CAACC,IAAI,CAACC,UAAU;EAClCxC,cAAc,EAAEsC,kBAAS,CAACC,IAAI;EAC9B;EACArC,UAAU,EAAEoC,kBAAS,CAACG,KAAK,CAAC;IAC1BxB,IAAI,EAAEqB,kBAAS,CAACG,KAAK,CAAC;MAAExB,IAAI,EAAEqB,kBAAS,CAACI;IAAO,CAAC;EAClD,CAAC,CAAC;EACFvC,WAAW,EAAEmC,kBAAS,CAACK,IAAI,CAACH,UAAU;EACtCpC,gBAAgB,EAAEkC,kBAAS,CAACC,IAAI,CAACC,UAAU;EAC3CvC,KAAK,EAAEqC,kBAAS,CAACK,IAAI;EACrBtC,cAAc,EAAEiC,kBAAS,CAACK,IAAI;EAC9BrC,MAAM,EAAEgC,kBAAS,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC;EAC3B;EACAlC,IAAI,EAAEqC,eAAS,CAACJ;AAClB,CAAC;AAEM,MAAMK,eAAe,GAAIC,KAAK,KAAM;EACzC5C,UAAU,EAAE6C,gBAAS,CAACC,GAAG,CAAC9C,UAAU,CAAC4C,KAAK,CAAC;EAC3C3C,WAAW,EAAE4C,gBAAS,CAACE,QAAQ,CAACC,QAAQ,CAACJ,KAAK,EAAE;IAAEK,UAAU,EAAEC,qBAAW,CAACC;EAAW,CAAC,CAAC;EACvFpD,KAAK,EAAE8C,gBAAS,CAACC,GAAG,CAAC/C,KAAK,CAAC6C,KAAK,CAAC;EACjCzC,cAAc,EAAE0C,gBAAS,CAACE,QAAQ,CAACK,UAAU,CAACR,KAAK,EAAE;IAAEK,UAAU,EAAEC,qBAAW,CAACG;EAAY,CAAC,CAAC;EAC7FjD,MAAM,EAAEyC,gBAAS,CAACC,GAAG,CAAC1C,MAAM,CAACwC,KAAK;AACpC,CAAC,CAAC;AAACX,OAAA,CAAAU,eAAA,GAAAA,eAAA;AAEI,MAAMW,kBAAkB,GAAArB,OAAA,CAAAqB,kBAAA,GAAG;EAChCpD,gBAAgB,EAAEqD,cAAO,CAACT,GAAG,CAAC5C;AAChC,CAAC;AAAC,IAAAsD,QAAA,GAAAvB,OAAA,CAAA1F,OAAA,GAEa,IAAAkH,gBAAU,EAAC,IAAAC,mBAAO,EAACf,eAAe,EAAEW,kBAAkB,CAAC,CAAC3D,UAAU,CAAC,CAAC"}