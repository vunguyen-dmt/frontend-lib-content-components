{"version":3,"file":"hooks.js","names":["_react","require","_lodashEs","_interopRequireDefault","_messages","_module","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","state","exports","summary","val","useState","groupFeedbackCardHooks","groupFeedbacks","updateSettings","answerslist","setSummary","module","message","messages","noGroupFeedbackSummary","values","useEffect","feedbacksInList","map","_ref","answers","feedback","answerIDs","id","answersString","includes","groupFeedbackSummary","groupFeedback","handleAdd","newId","_","isEmpty","Math","max","modifiedGroupFeedbacks","groupFeedbackList","groupFeedbackRowHooks","_ref2","addSelectedAnswer","_ref3","oldGroupFeedback","find","x","newAnswers","newFeedback","remainingFeedbacks","item","updatedFeedbackList","sort","b","removedSelectedAnswer","_ref4","handleAnswersSelectedChange","event","checked","target","handleDelete","handleFeedbackChange","modifiedGroupFeedback"],"sources":["../../../../../../../../../src/editors/containers/ProblemEditor/components/EditProblemView/SettingsWidget/settingsComponents/GroupFeedback/hooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport _ from 'lodash-es';\nimport messages from './messages';\nimport * as module from './hooks';\n\nexport const state = {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  summary: (val) => useState(val),\n};\n\nexport const groupFeedbackCardHooks = (groupFeedbacks, updateSettings, answerslist) => {\n  const [summary, setSummary] = module.state.summary({ message: messages.noGroupFeedbackSummary, values: {} });\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useEffect(() => {\n    if (groupFeedbacks.length === 0) {\n      setSummary({ message: messages.noGroupFeedbackSummary, values: {} });\n    } else {\n      const feedbacksInList = groupFeedbacks.map(({ answers, feedback }) => {\n        const answerIDs = answerslist.map((a) => a.id);\n        const answersString = answers.filter((value) => answerIDs.includes(value));\n        return `${answersString} ${feedback}\\n`;\n      });\n      setSummary({\n        message: messages.groupFeedbackSummary,\n        values: { groupFeedback: feedbacksInList },\n      });\n    }\n  }, [groupFeedbacks, answerslist]);\n\n  const handleAdd = () => {\n    let newId = 0;\n    if (!_.isEmpty(groupFeedbacks)) {\n      newId = Math.max(...groupFeedbacks.map(feedback => feedback.id)) + 1;\n    }\n    const groupFeedback = { id: newId, answers: [], feedback: '' };\n    const modifiedGroupFeedbacks = [...groupFeedbacks, groupFeedback];\n    updateSettings({ groupFeedbackList: modifiedGroupFeedbacks });\n  };\n\n  return {\n    summary,\n    handleAdd,\n  };\n};\n\nexport const groupFeedbackRowHooks = ({ id, groupFeedbacks, updateSettings }) => {\n  // Hooks for the answers associated with a groupfeedback\n  const addSelectedAnswer = ({ value }) => {\n    const oldGroupFeedback = groupFeedbacks.find(x => x.id === id);\n    const newAnswers = [...oldGroupFeedback.answers, value];\n    const newFeedback = { ...oldGroupFeedback, answers: newAnswers };\n    const remainingFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    const updatedFeedbackList = [newFeedback, ...remainingFeedbacks].sort((a, b) => a.id - b.id);\n\n    updateSettings({ groupFeedbackList: updatedFeedbackList });\n  };\n  const removedSelectedAnswer = ({ value }) => {\n    const oldGroupFeedback = groupFeedbacks.find(x => x.id === id);\n    const newAnswers = oldGroupFeedback.answers.filter(item => item !== value);\n    const newFeedback = { ...oldGroupFeedback, answers: newAnswers };\n    const remainingFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    const updatedFeedbackList = [newFeedback, ...remainingFeedbacks].sort((a, b) => a.id - b.id);\n\n    updateSettings({ groupFeedbackList: updatedFeedbackList });\n  };\n  const handleAnswersSelectedChange = (event) => {\n    const { checked, value } = event.target;\n    if (checked) {\n      addSelectedAnswer({ value });\n    } else {\n      removedSelectedAnswer({ value });\n    }\n  };\n\n  // Delete Button\n  const handleDelete = () => {\n    const modifiedGroupFeedbacks = groupFeedbacks.filter((item) => (item.id !== id));\n    updateSettings({ groupFeedbackList: modifiedGroupFeedbacks });\n  };\n\n  // Hooks for the feedback associated with a groupfeedback\n  const handleFeedbackChange = (event) => {\n    const { value } = event.target;\n    const modifiedGroupFeedback = groupFeedbacks.map(groupFeedback => {\n      if (groupFeedback.id === id) {\n        return { ...groupFeedback, feedback: value };\n      }\n      return groupFeedback;\n    });\n    updateSettings({ groupFeedbackList: modifiedGroupFeedback });\n  };\n\n  return {\n    handleAnswersSelectedChange, handleFeedbackChange, handleDelete,\n  };\n};\n"],"mappings":"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"}