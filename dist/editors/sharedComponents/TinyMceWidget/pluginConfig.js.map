{"version":3,"file":"pluginConfig.js","names":["_utils","require","_tinyMCE","mapToolbars","toolbars","map","toolbar","join","pluginConfig","_ref","isLibrary","placeholder","editorType","image","plugins","imageTools","imagetools","imageUploadButton","buttons","editImageSettings","codePlugin","code","codeButton","labelButton","customLabelButton","quickToolbar","quickbars","inline","defaultFormat","StrictDict","link","lists","codesample","emoticons","table","hr","charmap","autoresize","media","menubar","undo","redo","formatSelect","fontselect","fontsizeselect","bold","italic","underline","strikethrough","foreColor","backColor","align","left","center","right","justify","bullist","numlist","outdent","indent","unlink","blockQuote","codeBlock","wirisMathType","wirisChemType","removeFormat","imageToolbar","quickbarsInsertToolbar","quickbarsSelectionToolbar","config","branding","height","toolbar_mode","toolbar_sticky","toolbar_sticky_offset","relative_urls","convert_urls","block_formats","forced_root_block","external_plugins","tiny_mce_wiris","draggable_modal","audio_template_callback","data","console","log","JSON","stringify","source","media_url_resolver","resolve","reject","url","toLowerCase","endsWith","msg","html","file_browser_callback_types","_default","exports","default"],"sources":["../../../../src/editors/sharedComponents/TinyMceWidget/pluginConfig.js"],"sourcesContent":["import { StrictDict } from '../../utils';\nimport { buttons, plugins } from '../../data/constants/tinyMCE';\n\nconst mapToolbars = toolbars => toolbars.map(toolbar => toolbar.join(' ')).join(' | ');\n\nconst pluginConfig = ({ isLibrary, placeholder, editorType }) => {\n  const image = isLibrary ? '' : plugins.image;\n  const imageTools = isLibrary ? '' : plugins.imagetools;\n  const imageUploadButton = isLibrary ? '' : buttons.imageUploadButton;\n  const editImageSettings = isLibrary ? '' : buttons.editImageSettings;\n  const codePlugin = editorType === 'text' ? plugins.code : '';\n  const codeButton = editorType === 'text' ? buttons.code : '';\n  const labelButton = editorType === 'question' ? buttons.customLabelButton : '';\n  const quickToolbar = editorType === 'expandable' ? plugins.quickbars : '';\n  const inline = editorType === 'expandable';\n  const toolbar = editorType !== 'expandable';\n  const defaultFormat = (editorType === 'question' || editorType === 'expandable') ? 'div' : 'p';\n\n  return (\n    StrictDict({\n      plugins: [\n        plugins.link,\n        plugins.lists,\n        plugins.codesample,\n        plugins.emoticons,\n        plugins.table,\n        plugins.hr,\n        plugins.charmap,\n        codePlugin,\n        plugins.autoresize,\n        image,\n        imageTools,\n        quickToolbar,\n        plugins.media,\n      ].join(' '),\n      menubar: false,\n      toolbar: toolbar ? mapToolbars([\n        [buttons.undo, buttons.redo],\n        [buttons.formatSelect],\n        [buttons.fontselect],\n        [buttons.fontsizeselect],\n        [labelButton],\n        [buttons.bold, buttons.italic, buttons.underline, buttons.strikethrough, buttons.foreColor, buttons.backColor],\n        [\n          buttons.align.left,\n          buttons.align.center,\n          buttons.align.right,\n          buttons.align.justify,\n        ],\n        [\n          buttons.bullist,\n          buttons.numlist,\n          buttons.outdent,\n          buttons.indent,\n        ],\n        [buttons.image, buttons.media, buttons.link, buttons.unlink, buttons.blockQuote, buttons.codeBlock],\n        [buttons.table, buttons.emoticons, buttons.charmap, buttons.wirisMathType, buttons.wirisChemType, buttons.hr],\n        [buttons.removeFormat, codeButton],\n      ]) : false,\n      imageToolbar: false,\n      // imageToolbar: mapToolbars([\n      //   // [buttons.rotate.left, buttons.rotate.right],\n      //   // [buttons.flip.horiz, buttons.flip.vert],\n      //   [editImageSettings],\n      // ]),\n      quickbarsInsertToolbar: toolbar ? false : mapToolbars([\n        [buttons.undo, buttons.redo],\n        [buttons.formatSelect],\n        [buttons.fontselect],\n        [buttons.fontsizeselect],\n        [buttons.bold, buttons.italic, buttons.underline, buttons.foreColor],\n        [\n          buttons.align.justify,\n          buttons.bullist,\n          buttons.numlist,\n        ],\n        [buttons.image, buttons.media, buttons.blockQuote, buttons.codeBlock],\n        [buttons.table, buttons.emoticons, buttons.charmap, buttons.wirisMathType, buttons.wirisChemType, buttons.removeFormat],\n      ]),\n      quickbarsSelectionToolbar: toolbar ? false : mapToolbars([\n        [buttons.undo, buttons.redo],\n        [buttons.formatSelect],\n        [buttons.fontselect],\n        [buttons.fontsizeselect],\n        [buttons.bold, buttons.italic, buttons.underline, buttons.foreColor],\n        [\n          buttons.align.justify,\n          buttons.bullist,\n          buttons.numlist,\n        ],\n        [buttons.image, buttons.media, buttons.blockQuote, buttons.codeBlock],\n        [buttons.table, buttons.emoticons, buttons.charmap, buttons.wirisMathType, buttons.wirisChemType, buttons.removeFormat],\n      ]),\n      config: {\n        branding: false,\n        height: '100%',\n        menubar: false,\n        toolbar_mode: 'sliding',\n        toolbar_sticky: true,\n        toolbar_sticky_offset: 76,\n        relative_urls: true,\n        convert_urls: false,\n        placeholder,\n        inline,\n        block_formats: 'Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6;Div=div;Paragraph=p;Preformatted=pre',\n        forced_root_block: defaultFormat,\n        external_plugins: { tiny_mce_wiris: 'https://www.wiris.net/demo/plugins/tiny_mce/plugin.js' },\n        draggable_modal: true,\n      },\n      audio_template_callback: function(data) {\n        console.log('audio_template_callback ' + JSON.stringify(data));\n        return `<audio controls=\"controls\"><source src=\"${data.source}\" /></audio>`;\n      },\n      media_url_resolver: function (data, resolve, reject) {\n        console.log('media_url_resolver ' + JSON.stringify(data));\n        if(data.url && data.url.toLowerCase().endsWith('.mp4')) {\n          reject({msg: 'Vui lòng sử dụng thành phần Video. Please use Video component instead.'});\n        } else {\n          resolve({html: ''});\n        }\n      },\n      file_browser_callback_types: false\n    })\n  );\n};\n\nexport default pluginConfig;"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAEA,MAAME,WAAW,GAAGC,QAAQ,IAAIA,QAAQ,CAACC,GAAG,CAACC,OAAO,IAAIA,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC,CAAC,CAACA,IAAI,CAAC,KAAK,CAAC;AAEtF,MAAMC,YAAY,GAAGC,IAAA,IAA4C;EAAA,IAA3C;IAAEC,SAAS;IAAEC,WAAW;IAAEC;EAAW,CAAC,GAAAH,IAAA;EAC1D,MAAMI,KAAK,GAAGH,SAAS,GAAG,EAAE,GAAGI,gBAAO,CAACD,KAAK;EAC5C,MAAME,UAAU,GAAGL,SAAS,GAAG,EAAE,GAAGI,gBAAO,CAACE,UAAU;EACtD,MAAMC,iBAAiB,GAAGP,SAAS,GAAG,EAAE,GAAGQ,gBAAO,CAACD,iBAAiB;EACpE,MAAME,iBAAiB,GAAGT,SAAS,GAAG,EAAE,GAAGQ,gBAAO,CAACC,iBAAiB;EACpE,MAAMC,UAAU,GAAGR,UAAU,KAAK,MAAM,GAAGE,gBAAO,CAACO,IAAI,GAAG,EAAE;EAC5D,MAAMC,UAAU,GAAGV,UAAU,KAAK,MAAM,GAAGM,gBAAO,CAACG,IAAI,GAAG,EAAE;EAC5D,MAAME,WAAW,GAAGX,UAAU,KAAK,UAAU,GAAGM,gBAAO,CAACM,iBAAiB,GAAG,EAAE;EAC9E,MAAMC,YAAY,GAAGb,UAAU,KAAK,YAAY,GAAGE,gBAAO,CAACY,SAAS,GAAG,EAAE;EACzE,MAAMC,MAAM,GAAGf,UAAU,KAAK,YAAY;EAC1C,MAAMN,OAAO,GAAGM,UAAU,KAAK,YAAY;EAC3C,MAAMgB,aAAa,GAAIhB,UAAU,KAAK,UAAU,IAAIA,UAAU,KAAK,YAAY,GAAI,KAAK,GAAG,GAAG;EAE9F,OACE,IAAAiB,iBAAU,EAAC;IACTf,OAAO,EAAE,CACPA,gBAAO,CAACgB,IAAI,EACZhB,gBAAO,CAACiB,KAAK,EACbjB,gBAAO,CAACkB,UAAU,EAClBlB,gBAAO,CAACmB,SAAS,EACjBnB,gBAAO,CAACoB,KAAK,EACbpB,gBAAO,CAACqB,EAAE,EACVrB,gBAAO,CAACsB,OAAO,EACfhB,UAAU,EACVN,gBAAO,CAACuB,UAAU,EAClBxB,KAAK,EACLE,UAAU,EACVU,YAAY,EACZX,gBAAO,CAACwB,KAAK,CACd,CAAC/B,IAAI,CAAC,GAAG,CAAC;IACXgC,OAAO,EAAE,KAAK;IACdjC,OAAO,EAAEA,OAAO,GAAGH,WAAW,CAAC,CAC7B,CAACe,gBAAO,CAACsB,IAAI,EAAEtB,gBAAO,CAACuB,IAAI,CAAC,EAC5B,CAACvB,gBAAO,CAACwB,YAAY,CAAC,EACtB,CAACxB,gBAAO,CAACyB,UAAU,CAAC,EACpB,CAACzB,gBAAO,CAAC0B,cAAc,CAAC,EACxB,CAACrB,WAAW,CAAC,EACb,CAACL,gBAAO,CAAC2B,IAAI,EAAE3B,gBAAO,CAAC4B,MAAM,EAAE5B,gBAAO,CAAC6B,SAAS,EAAE7B,gBAAO,CAAC8B,aAAa,EAAE9B,gBAAO,CAAC+B,SAAS,EAAE/B,gBAAO,CAACgC,SAAS,CAAC,EAC9G,CACEhC,gBAAO,CAACiC,KAAK,CAACC,IAAI,EAClBlC,gBAAO,CAACiC,KAAK,CAACE,MAAM,EACpBnC,gBAAO,CAACiC,KAAK,CAACG,KAAK,EACnBpC,gBAAO,CAACiC,KAAK,CAACI,OAAO,CACtB,EACD,CACErC,gBAAO,CAACsC,OAAO,EACftC,gBAAO,CAACuC,OAAO,EACfvC,gBAAO,CAACwC,OAAO,EACfxC,gBAAO,CAACyC,MAAM,CACf,EACD,CAACzC,gBAAO,CAACL,KAAK,EAAEK,gBAAO,CAACoB,KAAK,EAAEpB,gBAAO,CAACY,IAAI,EAAEZ,gBAAO,CAAC0C,MAAM,EAAE1C,gBAAO,CAAC2C,UAAU,EAAE3C,gBAAO,CAAC4C,SAAS,CAAC,EACnG,CAAC5C,gBAAO,CAACgB,KAAK,EAAEhB,gBAAO,CAACe,SAAS,EAAEf,gBAAO,CAACkB,OAAO,EAAElB,gBAAO,CAAC6C,aAAa,EAAE7C,gBAAO,CAAC8C,aAAa,EAAE9C,gBAAO,CAACiB,EAAE,CAAC,EAC7G,CAACjB,gBAAO,CAAC+C,YAAY,EAAE3C,UAAU,CAAC,CACnC,CAAC,GAAG,KAAK;IACV4C,YAAY,EAAE,KAAK;IACnB;IACA;IACA;IACA;IACA;IACAC,sBAAsB,EAAE7D,OAAO,GAAG,KAAK,GAAGH,WAAW,CAAC,CACpD,CAACe,gBAAO,CAACsB,IAAI,EAAEtB,gBAAO,CAACuB,IAAI,CAAC,EAC5B,CAACvB,gBAAO,CAACwB,YAAY,CAAC,EACtB,CAACxB,gBAAO,CAACyB,UAAU,CAAC,EACpB,CAACzB,gBAAO,CAAC0B,cAAc,CAAC,EACxB,CAAC1B,gBAAO,CAAC2B,IAAI,EAAE3B,gBAAO,CAAC4B,MAAM,EAAE5B,gBAAO,CAAC6B,SAAS,EAAE7B,gBAAO,CAAC+B,SAAS,CAAC,EACpE,CACE/B,gBAAO,CAACiC,KAAK,CAACI,OAAO,EACrBrC,gBAAO,CAACsC,OAAO,EACftC,gBAAO,CAACuC,OAAO,CAChB,EACD,CAACvC,gBAAO,CAACL,KAAK,EAAEK,gBAAO,CAACoB,KAAK,EAAEpB,gBAAO,CAAC2C,UAAU,EAAE3C,gBAAO,CAAC4C,SAAS,CAAC,EACrE,CAAC5C,gBAAO,CAACgB,KAAK,EAAEhB,gBAAO,CAACe,SAAS,EAAEf,gBAAO,CAACkB,OAAO,EAAElB,gBAAO,CAAC6C,aAAa,EAAE7C,gBAAO,CAAC8C,aAAa,EAAE9C,gBAAO,CAAC+C,YAAY,CAAC,CACxH,CAAC;IACFG,yBAAyB,EAAE9D,OAAO,GAAG,KAAK,GAAGH,WAAW,CAAC,CACvD,CAACe,gBAAO,CAACsB,IAAI,EAAEtB,gBAAO,CAACuB,IAAI,CAAC,EAC5B,CAACvB,gBAAO,CAACwB,YAAY,CAAC,EACtB,CAACxB,gBAAO,CAACyB,UAAU,CAAC,EACpB,CAACzB,gBAAO,CAAC0B,cAAc,CAAC,EACxB,CAAC1B,gBAAO,CAAC2B,IAAI,EAAE3B,gBAAO,CAAC4B,MAAM,EAAE5B,gBAAO,CAAC6B,SAAS,EAAE7B,gBAAO,CAAC+B,SAAS,CAAC,EACpE,CACE/B,gBAAO,CAACiC,KAAK,CAACI,OAAO,EACrBrC,gBAAO,CAACsC,OAAO,EACftC,gBAAO,CAACuC,OAAO,CAChB,EACD,CAACvC,gBAAO,CAACL,KAAK,EAAEK,gBAAO,CAACoB,KAAK,EAAEpB,gBAAO,CAAC2C,UAAU,EAAE3C,gBAAO,CAAC4C,SAAS,CAAC,EACrE,CAAC5C,gBAAO,CAACgB,KAAK,EAAEhB,gBAAO,CAACe,SAAS,EAAEf,gBAAO,CAACkB,OAAO,EAAElB,gBAAO,CAAC6C,aAAa,EAAE7C,gBAAO,CAAC8C,aAAa,EAAE9C,gBAAO,CAAC+C,YAAY,CAAC,CACxH,CAAC;IACFI,MAAM,EAAE;MACNC,QAAQ,EAAE,KAAK;MACfC,MAAM,EAAE,MAAM;MACdhC,OAAO,EAAE,KAAK;MACdiC,YAAY,EAAE,SAAS;MACvBC,cAAc,EAAE,IAAI;MACpBC,qBAAqB,EAAE,EAAE;MACzBC,aAAa,EAAE,IAAI;MACnBC,YAAY,EAAE,KAAK;MACnBjE,WAAW;MACXgB,MAAM;MACNkD,aAAa,EAAE,8GAA8G;MAC7HC,iBAAiB,EAAElD,aAAa;MAChCmD,gBAAgB,EAAE;QAAEC,cAAc,EAAE;MAAwD,CAAC;MAC7FC,eAAe,EAAE;IACnB,CAAC;IACDC,uBAAuB,EAAE,SAAAA,CAASC,IAAI,EAAE;MACtCC,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAGC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;MAC9D,OAAQ,2CAA0CA,IAAI,CAACK,MAAO,cAAa;IAC7E,CAAC;IACDC,kBAAkB,EAAE,SAAAA,CAAUN,IAAI,EAAEO,OAAO,EAAEC,MAAM,EAAE;MACnDP,OAAO,CAACC,GAAG,CAAC,qBAAqB,GAAGC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;MACzD,IAAGA,IAAI,CAACS,GAAG,IAAIT,IAAI,CAACS,GAAG,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACtDH,MAAM,CAAC;UAACI,GAAG,EAAE;QAAwE,CAAC,CAAC;MACzF,CAAC,MAAM;QACLL,OAAO,CAAC;UAACM,IAAI,EAAE;QAAE,CAAC,CAAC;MACrB;IACF,CAAC;IACDC,2BAA2B,EAAE;EAC/B,CAAC,CAAC;AAEN,CAAC;AAAC,IAAAC,QAAA,GAEa1F,YAAY;AAAA2F,OAAA,CAAAC,OAAA,GAAAF,QAAA"}