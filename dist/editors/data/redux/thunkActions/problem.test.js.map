{"version":3,"file":"problem.test.js","names":["_","require","_module","_interopRequireWildcard","_olxTestData","_problem2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","mockOlx","mockBuildOlx","jest","fn","mock","mockImplementation","buildOLX","actions","problem","load","setEnableTypeSelection","updateField","args","fetchAdvancedSettings","fetchAdvanceSettings","blockValue","data","checkboxesOLXWithFeedbackAndHintsOLX","rawOLX","metadata","rawSettings","defaultSettings","max_attempts","describe","dispatch","getState","dispatchedAction","beforeEach","action","afterEach","restoreAllMocks","test","module","initializeProblem","expect","toHaveBeenCalled","switchToAdvancedEditor","toHaveBeenCalledWith","problemType","ProblemTypeKeys","ADVANCED","it","calls","not","toEqual","undefined","mockClear","onSuccess","onFailure","advancedProblemOlX","loadProblem","blankProblemOLX"],"sources":["../../../../../src/editors/data/redux/thunkActions/problem.test.js"],"sourcesContent":["import { actions } from '..';\nimport * as module from './problem';\nimport { checkboxesOLXWithFeedbackAndHintsOLX, advancedProblemOlX, blankProblemOLX } from '../../../containers/ProblemEditor/data/mockData/olxTestData';\nimport { ProblemTypeKeys } from '../../constants/problem';\n\nconst mockOlx = 'SOmEVALue';\nconst mockBuildOlx = jest.fn(() => mockOlx);\njest.mock('../../../containers/ProblemEditor/data/ReactStateOLXParser', () => jest.fn().mockImplementation(() => ({ buildOLX: mockBuildOlx })));\n\njest.mock('..', () => ({\n  actions: {\n    problem: {\n      load: () => {},\n      setEnableTypeSelection: () => {},\n      updateField: (args) => args,\n    },\n  },\n}));\n\njest.mock('./requests', () => ({\n  fetchAdvancedSettings: (args) => ({ fetchAdvanceSettings: args }),\n}));\n\nconst blockValue = {\n  data: {\n    data: checkboxesOLXWithFeedbackAndHintsOLX.rawOLX,\n    metadata: {},\n  },\n};\n\nlet rawOLX = blockValue.data.data;\nconst rawSettings = {};\nconst defaultSettings = { max_attempts: 1 };\n\ndescribe('problem thunkActions', () => {\n  let dispatch;\n  let getState;\n  let dispatchedAction;\n  beforeEach(() => {\n    dispatch = jest.fn((action) => ({ dispatch: action }));\n    getState = jest.fn(() => ({\n      problem: {\n      },\n    }));\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n  test('initializeProblem visual Problem :', () => {\n    module.initializeProblem(blockValue)(dispatch);\n    expect(dispatch).toHaveBeenCalled();\n  });\n  test('switchToAdvancedEditor visual Problem', () => {\n    module.switchToAdvancedEditor()(dispatch, getState);\n    expect(dispatch).toHaveBeenCalledWith(\n      actions.problem.updateField({ problemType: ProblemTypeKeys.ADVANCED, rawOLX: mockOlx }),\n    );\n  });\n  describe('fetchAdvanceSettings', () => {\n    it('dispatches fetchAdvanceSettings action', () => {\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      expect(dispatchedAction.fetchAdvanceSettings).not.toEqual(undefined);\n    });\n    it('dispatches actions.problem.updateField and loadProblem on success', () => {\n      dispatch.mockClear();\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      dispatchedAction.fetchAdvanceSettings.onSuccess({ data: { key: 'test', max_attempts: 1 } });\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n    it('calls loadProblem on failure', () => {\n      dispatch.mockClear();\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      dispatchedAction.fetchAdvanceSettings.onFailure();\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n  });\n  describe('loadProblem', () => {\n    test('initializeProblem advanced Problem', () => {\n      rawOLX = advancedProblemOlX.rawOLX;\n      module.loadProblem({ rawOLX, rawSettings, defaultSettings })(dispatch);\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n    test('initializeProblem blank Problem', () => {\n      rawOLX = blankProblemOLX.rawOLX;\n      module.loadProblem({ rawOLX, rawSettings, defaultSettings })(dispatch);\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.setEnableTypeSelection());\n    });\n  });\n});\n"],"mappings":"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"}