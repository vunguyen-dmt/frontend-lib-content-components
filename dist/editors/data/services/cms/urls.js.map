{"version":3,"file":"urls.js","names":["libraryV1","_ref","studioEndpointUrl","learningContextId","exports","unit","_ref2","unitUrl","blockId","data","ancestors","id","returnUrl","_ref3","startsWith","includes","block","_ref4","blockAncestor","_ref5","blockStudioView","_ref6","courseAssets","_ref7","thumbnailUpload","_ref8","videoId","videoTranscripts","_ref9","downloadVideoTranscriptURL","_ref10","language","mediaTranscriptURL","_ref11","transcriptUrl","downloadVideoHandoutUrl","_ref12","handout","courseDetailsUrl","_ref13","checkTranscriptsForImport","_ref14","parameters","replaceTranscript","_ref15","courseAdvanceSettings","_ref16","videoFeatures","_ref17","courseVideos","_ref18"],"sources":["../../../../../src/editors/data/services/cms/urls.js"],"sourcesContent":["export const libraryV1 = ({ studioEndpointUrl, learningContextId }) => (\n  `${studioEndpointUrl}/library/${learningContextId}`\n);\n\nexport const unit = ({ studioEndpointUrl, unitUrl, blockId }) => (\n  `${studioEndpointUrl}/container/${unitUrl.data.ancestors[0]?.id}#${blockId}`\n);\n\nexport const returnUrl = ({\n  studioEndpointUrl, unitUrl, learningContextId, blockId,\n}) => {\n  if (learningContextId && learningContextId.startsWith('library-v1')) {\n    // when the learning context is a v1 library, return to the library page\n    return libraryV1({ studioEndpointUrl, learningContextId });\n  }\n  if (learningContextId && learningContextId.startsWith('lib')) {\n    // when it's a v2 library, there will be no return url (instead a closed popup)\n    // (temporary) don't throw error, just return empty url. it will fail it's network connection but otherwise\n    // the app will run\n    // throw new Error('Return url not available (or needed) for V2 libraries');\n    return '';\n  }\n  // when the learning context is a course, return to the unit page\n  // only do this for v1 blocks\n  if (unitUrl && blockId.includes('block-v1')) {\n    return unit({ studioEndpointUrl, unitUrl, blockId });\n  }\n  return '';\n};\n\nexport const block = ({ studioEndpointUrl, blockId }) => (\n  blockId.startsWith('lb:')\n    ? `${studioEndpointUrl}/api/xblock/v2/xblocks/${blockId}/fields/`\n    : `${studioEndpointUrl}/xblock/${blockId}`\n);\n\nexport const blockAncestor = ({ studioEndpointUrl, blockId }) => {\n  if (blockId.includes('block-v1')) {\n    return `${block({ studioEndpointUrl, blockId })}?fields=ancestorInfo`;\n  }\n  // this url only need to get info to build the return url, which isn't used by V2 blocks\n  // (temporary) don't throw error, just return empty url. it will fail it's network connection but otherwise\n  // the app will run\n  // throw new Error('Block ancestor not available (and not needed) for V2 blocks');\n  return '';\n};\n\nexport const blockStudioView = ({ studioEndpointUrl, blockId }) => (\n  blockId.includes('block-v1')\n    ? `${block({ studioEndpointUrl, blockId })}/studio_view`\n    : `${studioEndpointUrl}/api/xblock/v2/xblocks/${blockId}/view/studio_view/`\n);\n\nexport const courseAssets = ({ studioEndpointUrl, learningContextId }) => (\n  `${studioEndpointUrl}/assets/${learningContextId}/?page_size=500`\n);\n\nexport const thumbnailUpload = ({ studioEndpointUrl, learningContextId, videoId }) => (\n  `${studioEndpointUrl}/video_images/${learningContextId}/${videoId}`\n);\n\nexport const videoTranscripts = ({ studioEndpointUrl, blockId }) => (\n  `${block({ studioEndpointUrl, blockId })}/handler/studio_transcript/translation`\n);\n\nexport const downloadVideoTranscriptURL = ({ studioEndpointUrl, blockId, language }) => (\n  `${videoTranscripts({ studioEndpointUrl, blockId })}?language_code=${language}`\n);\n\nexport const mediaTranscriptURL = ({ studioEndpointUrl, transcriptUrl }) => (\n  `${studioEndpointUrl}${transcriptUrl}`\n);\n\nexport const downloadVideoHandoutUrl = ({ studioEndpointUrl, handout }) => (\n  `${studioEndpointUrl}${handout}`\n);\n\nexport const courseDetailsUrl = ({ studioEndpointUrl, learningContextId }) => (\n  `${studioEndpointUrl}/settings/details/${learningContextId}`\n);\n\nexport const checkTranscriptsForImport = ({ studioEndpointUrl, parameters }) => (\n  `${studioEndpointUrl}/transcripts/check?data=${parameters}`\n);\n\nexport const replaceTranscript = ({ studioEndpointUrl, parameters }) => (\n  `${studioEndpointUrl}/transcripts/replace?data=${parameters}`\n);\n\nexport const courseAdvanceSettings = ({ studioEndpointUrl, learningContextId }) => (\n  `${studioEndpointUrl}/api/contentstore/v0/advanced_settings/${learningContextId}`\n);\n\nexport const videoFeatures = ({ studioEndpointUrl }) => (\n  `${studioEndpointUrl}/video_features/`\n);\n\nexport const courseVideos = ({ studioEndpointUrl, learningContextId }) => (\n  `${studioEndpointUrl}/videos/${learningContextId}`\n);\n"],"mappings":"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"}