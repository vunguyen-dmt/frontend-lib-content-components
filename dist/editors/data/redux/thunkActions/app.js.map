{"version":3,"file":"app.js","names":["_utils","require","_","requests","_interopRequireWildcard","_module","_requests2","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","fetchBlock","dispatch","onSuccess","response","actions","app","setBlockValue","onFailure","error","failRequest","requestKey","RequestKeys","exports","fetchStudioView","setStudioView","fetchUnit","setUnitUrl","fetchAssets","setAssets","fetchVideos","setVideos","data","videos","fetchCourseDetails","setCourseDetails","initialize","module","saveBlock","content","returnToUnit","setBlockContent","setSaveResponse","uploadImage","_ref","file","setSelection","uploadAsset","asset","camelizeKeys","_default","StrictDict"],"sources":["../../../../../src/editors/data/redux/thunkActions/app.js"],"sourcesContent":["import { StrictDict, camelizeKeys } from '../../../utils';\n/* eslint-disable import/no-cycle */\nimport { actions } from '..';\nimport * as requests from './requests';\nimport * as module from './app';\nimport { RequestKeys } from '../../constants/requests';\n\nexport const fetchBlock = () => (dispatch) => {\n  dispatch(requests.fetchBlock({\n    onSuccess: (response) => dispatch(actions.app.setBlockValue(response)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchBlock,\n      error,\n    })),\n  }));\n};\n\nexport const fetchStudioView = () => (dispatch) => {\n  dispatch(requests.fetchStudioView({\n    onSuccess: (response) => dispatch(actions.app.setStudioView(response)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchStudioView,\n      error,\n    })),\n  }));\n};\n\nexport const fetchUnit = () => (dispatch) => {\n  dispatch(requests.fetchUnit({\n    onSuccess: (response) => dispatch(actions.app.setUnitUrl(response)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchUnit,\n      error,\n    })),\n  }));\n};\n\nexport const fetchAssets = () => (dispatch) => {\n  dispatch(requests.fetchAssets({\n    onSuccess: (response) => dispatch(actions.app.setAssets(response)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchAssets,\n      error,\n    })),\n  }));\n};\n\nexport const fetchVideos = () => (dispatch) => {\n  dispatch(requests.fetchVideos({\n    onSuccess: (response) => dispatch(actions.app.setVideos(response.data.videos)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchVideos,\n      error,\n    })),\n  }));\n};\n\nexport const fetchCourseDetails = () => (dispatch) => {\n  dispatch(requests.fetchCourseDetails({\n    onSuccess: (response) => dispatch(actions.app.setCourseDetails(response)),\n    onFailure: (error) => dispatch(actions.requests.failRequest({\n      requestKey: RequestKeys.fetchCourseDetails,\n      error,\n    })),\n  }));\n};\n\n/**\n * @param {string} studioEndpointUrl\n * @param {string} blockId\n * @param {string} learningContextId\n * @param {string} blockType\n */\nexport const initialize = (data) => (dispatch) => {\n  dispatch(actions.app.initialize(data));\n  dispatch(module.fetchBlock());\n  dispatch(module.fetchUnit());\n  dispatch(module.fetchStudioView());\n  dispatch(module.fetchAssets());\n  dispatch(module.fetchVideos());\n  dispatch(module.fetchCourseDetails());\n};\n\n/**\n * @param {func} onSuccess\n */\nexport const saveBlock = (content, returnToUnit) => (dispatch) => {\n  dispatch(actions.app.setBlockContent(content));\n  dispatch(requests.saveBlock({\n    content,\n    onSuccess: (response) => {\n      dispatch(actions.app.setSaveResponse(response));\n      returnToUnit(response.data);\n    },\n  }));\n};\n\nexport const uploadImage = ({ file, setSelection }) => (dispatch) => {\n  dispatch(requests.uploadAsset({\n    asset: file,\n    onSuccess: (response) => setSelection(camelizeKeys(response.data.asset)),\n  }));\n};\n\nexport default StrictDict({\n  fetchBlock,\n  fetchCourseDetails,\n  fetchStudioView,\n  fetchUnit,\n  fetchVideos,\n  initialize,\n  saveBlock,\n  fetchAssets,\n  uploadImage,\n});\n"],"mappings":"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"}