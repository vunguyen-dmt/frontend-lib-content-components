{"version":3,"file":"hooks.js","names":["_react","_interopRequireDefault","require","_reactRedux","_module","_interopRequireWildcard","_messages","appHooks","_redux","_analyticsEvt","_utils","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","navigateCallback","navigateTo","exports","useSearchAndSortProps","searchString","setSearchString","React","useState","sortBy","setSortBy","sortKeys","dateNewest","filterBy","setFilterBy","filterKeys","anyStatus","hideSelectedVideos","setHideSelectedVideos","onSearchChange","target","clearSearchString","onSortClick","sortMessages","onFilterClick","filterMessages","showSwitch","switchMessage","messages","hideSelectedCourseVideosSwitchLabel","onSwitchClick","filterListBySearch","_ref","videoList","_ref2","displayName","toLowerCase","includes","filterListByStatus","_ref3","statusFilter","_ref4","status","filterListByHideSelectedCourse","_ref5","filterList","_ref6","videos","filteredList","module","sort","sortFunctions","useVideoListProps","_ref7","searchSortProps","highlighted","setHighlighted","showSelectVideoError","setShowSelectVideoError","showSizeError","setShowSizeError","learningContextId","useSelector","selectors","app","blockId","galleryError","show","dismiss","message","selectVideoError","inputError","fileSizeError","galleryProps","galleryIsEmpty","searchIsEmpty","displayList","onHighlightChange","emptyGalleryLabel","showIdsOnCards","height","selectBtnProps","onClick","useVideoUploadHandler","_ref8","replace","path","window","location","useCancelHandler","destination","returnUrl","analytics","analyticsEvent","analyticsEvt","videoGalleryCancelClick","buildVideos","_ref9","rawVideos","rawVideoList","values","map","video","id","edx_video_id","client_video_id","externalUrl","course_video_image_url","dateAdded","Date","created","locked","thumbnail","status_nontranslated","statusBadgeVariant","getstatusBadgeVariant","statusMessage","getStatusMessage","duration","transcripts","_ref10","failed","uploading","processing","_ref11","find","m","defaultMessage","useVideoProps","_ref12","fileInput","click","_default"],"sources":["../../../../src/editors/containers/VideoGallery/hooks.js"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as module from './hooks';\nimport messages from './messages';\nimport * as appHooks from '../../hooks';\nimport { selectors } from '../../data/redux';\nimport analyticsEvt from '../../data/constants/analyticsEvt';\nimport {\n  filterKeys, filterMessages, sortFunctions, sortKeys, sortMessages,\n} from './utils';\n\nexport const {\n  navigateCallback,\n  navigateTo,\n} = appHooks;\n\nexport const useSearchAndSortProps = () => {\n  const [searchString, setSearchString] = React.useState('');\n  const [sortBy, setSortBy] = React.useState(sortKeys.dateNewest);\n  const [filterBy, setFilterBy] = React.useState(filterKeys.anyStatus);\n  const [hideSelectedVideos, setHideSelectedVideos] = React.useState(false);\n\n  return {\n    searchString,\n    onSearchChange: (e) => setSearchString(e.target.value),\n    clearSearchString: () => setSearchString(''),\n    sortBy,\n    onSortClick: (key) => () => setSortBy(key),\n    sortKeys,\n    sortMessages,\n    filterBy,\n    onFilterClick: (key) => () => setFilterBy(key),\n    filterKeys,\n    filterMessages,\n    showSwitch: false,\n    hideSelectedVideos,\n    switchMessage: messages.hideSelectedCourseVideosSwitchLabel,\n    onSwitchClick: () => setHideSelectedVideos(!hideSelectedVideos),\n  };\n};\n\nexport const filterListBySearch = ({\n  searchString,\n  videoList,\n}) => (\n  videoList.filter(({ displayName }) => displayName.toLowerCase()\n    .includes(searchString.toLowerCase()))\n);\n\nexport const filterListByStatus = ({ statusFilter, videoList }) => {\n  if (statusFilter === filterKeys.anyStatus) {\n    return videoList;\n  }\n  return videoList.filter(({ status }) => filterKeys[statusFilter] === status);\n};\n\nexport const filterListByHideSelectedCourse = ({ videoList }) => (\n  // TODO Missing to implement this\n  videoList\n);\n\nexport const filterList = ({\n  sortBy,\n  filterBy,\n  searchString,\n  videos,\n}) => {\n  let filteredList = module.filterListBySearch({\n    searchString,\n    videoList: videos,\n  });\n  filteredList = module.filterListByStatus({\n    statusFilter: filterBy,\n    videoList: filteredList,\n  });\n  filteredList = module.filterListByHideSelectedCourse({\n    videoList: filteredList,\n  });\n  return filteredList.sort(sortFunctions[sortBy in sortKeys ? sortKeys[sortBy] : sortKeys.dateNewest]);\n};\n\nexport const useVideoListProps = ({\n  searchSortProps,\n  videos,\n}) => {\n  const [highlighted, setHighlighted] = React.useState(null);\n  const [\n    showSelectVideoError,\n    setShowSelectVideoError,\n  ] = React.useState(false);\n  const [\n    showSizeError,\n    setShowSizeError,\n  ] = React.useState(false);\n  const filteredList = module.filterList({\n    ...searchSortProps,\n    videos,\n  });\n  const learningContextId = useSelector(selectors.app.learningContextId);\n  const blockId = useSelector(selectors.app.blockId);\n  return {\n    galleryError: {\n      show: showSelectVideoError,\n      set: () => setShowSelectVideoError(true),\n      dismiss: () => setShowSelectVideoError(false),\n      message: messages.selectVideoError,\n    },\n    // TODO We need to update this message when implementing the video upload screen\n    inputError: {\n      show: showSizeError,\n      set: () => setShowSizeError(true),\n      dismiss: () => setShowSelectVideoError(false),\n      message: messages.fileSizeError,\n    },\n    galleryProps: {\n      galleryIsEmpty: Object.keys(filteredList).length === 0,\n      searchIsEmpty: filteredList.length === 0,\n      displayList: filteredList,\n      highlighted,\n      onHighlightChange: (e) => setHighlighted(e.target.value),\n      emptyGalleryLabel: messages.emptyGalleryLabel,\n      showIdsOnCards: true,\n      height: '100%',\n    },\n    selectBtnProps: {\n      onClick: () => {\n        if (highlighted) {\n          navigateTo(`/course/${learningContextId}/editor/video/${blockId}?selectedVideoId=${highlighted}`);\n        } else {\n          setShowSelectVideoError(true);\n        }\n      },\n    },\n  };\n};\n\nexport const useVideoUploadHandler = ({ replace }) => {\n  const learningContextId = useSelector(selectors.app.learningContextId);\n  const blockId = useSelector(selectors.app.blockId);\n  const path = `/course/${learningContextId}/editor/video_upload/${blockId}`;\n  if (replace) {\n    return () => window.location.replace(path);\n  }\n  return () => navigateTo(path);\n};\n\nexport const useCancelHandler = () => (\n  navigateCallback({\n    destination: useSelector(selectors.app.returnUrl),\n    analytics: useSelector(selectors.app.analytics),\n    analyticsEvent: analyticsEvt.videoGalleryCancelClick,\n  })\n);\n\nexport const buildVideos = ({ rawVideos }) => {\n  let videos = [];\n  const rawVideoList = Object.values(rawVideos);\n  if (rawVideoList.length > 0) {\n    videos = rawVideoList.map(video => ({\n      id: video.edx_video_id,\n      displayName: video.client_video_id,\n      externalUrl: video.course_video_image_url,\n      dateAdded: new Date(video.created),\n      locked: false,\n      thumbnail: video.course_video_image_url,\n      status: video.status_nontranslated,\n      statusBadgeVariant: module.getstatusBadgeVariant({ status: video.status_nontranslated }),\n      statusMessage: module.getStatusMessage({ status: video.status_nontranslated }),\n      duration: video.duration,\n      transcripts: video.transcripts,\n    }));\n  }\n  return videos;\n};\n\nexport const getstatusBadgeVariant = ({ status }) => {\n  switch (status) {\n    case filterKeys.failed:\n      return 'danger';\n    case filterKeys.uploading:\n    case filterKeys.processing:\n      return 'light';\n    default:\n      return null;\n  }\n};\n\nexport const getStatusMessage = ({ status }) => Object.values(filterMessages).find((m) => m.defaultMessage === status);\n\nexport const useVideoProps = ({ videos }) => {\n  const searchSortProps = useSearchAndSortProps();\n  const videoList = useVideoListProps({\n    searchSortProps,\n    videos,\n  });\n  const {\n    galleryError,\n    galleryProps,\n    inputError,\n    selectBtnProps,\n  } = videoList;\n  const fileInput = { click: useVideoUploadHandler({ replace: false }) };\n\n  return {\n    galleryError,\n    inputError,\n    fileInput,\n    galleryProps,\n    searchSortProps,\n    selectBtnProps,\n  };\n};\n\nexport default {\n  useVideoProps,\n  buildVideos,\n  useCancelHandler,\n  useVideoUploadHandler,\n};\n"],"mappings":"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"}