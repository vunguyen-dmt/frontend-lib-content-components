{"version":3,"file":"FormGroupContext.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_classnames","_newId","_fieldUtils","_constants","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","identityFn","props","noop","FormGroupContext","exports","React","createContext","getControlProps","useSetIsControlGroupEffect","getLabelProps","getDescriptorProps","hasFormGroupProvider","useFormGroupContext","useContext","useStateEffect","initialState","state","setState","useState","useSetStateEffect","newState","useEffect","FormGroupContextProvider","_ref","children","controlId","explicitControlId","isInvalid","isValid","size","useMemo","newId","describedByIds","registerDescriptorId","useIdList","labelledByIds","registerLabelerId","isControlGroup","useCallback","controlProps","labelledByIdsForControl","undefined","omitUndefinedProperties","classNames","id","labelProps","htmlFor","descriptorProps","contextValue","jsx","Provider","propTypes","PropTypes","node","isRequired","string","bool","oneOf","FORM_CONTROL_SIZES","SMALL","LARGE","defaultProps"],"sources":["../../../../src/editors/sharedComponents/SelectableBox/FormGroupContext.jsx"],"sourcesContent":["import React, {\n  useState, useEffect, useMemo, useCallback,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport newId from './newId';\nimport { useIdList, omitUndefinedProperties } from './fieldUtils';\nimport { FORM_CONTROL_SIZES } from './constants';\n\nconst identityFn = props => props;\nconst noop = () => {};\n\nconst FormGroupContext = React.createContext({\n  getControlProps: identityFn,\n  useSetIsControlGroupEffect: noop,\n  getLabelProps: identityFn,\n  getDescriptorProps: identityFn,\n  hasFormGroupProvider: false,\n});\n\nconst useFormGroupContext = () => React.useContext(FormGroupContext);\n\nconst useStateEffect = (initialState) => {\n  const [state, setState] = useState(initialState);\n  const useSetStateEffect = (newState) => {\n    useEffect(() => setState(newState), [newState]);\n  };\n  return [state, useSetStateEffect];\n};\n\nconst FormGroupContextProvider = ({\n  children,\n  controlId: explicitControlId,\n  isInvalid,\n  isValid,\n  size,\n}) => {\n  const controlId = useMemo(() => explicitControlId || newId('form-field'), [explicitControlId]);\n  const [describedByIds, registerDescriptorId] = useIdList(controlId);\n  const [labelledByIds, registerLabelerId] = useIdList(controlId);\n  const [isControlGroup, useSetIsControlGroupEffect] = useStateEffect(false);\n\n  const getControlProps = useCallback((controlProps) => {\n    // labelledByIds from the list above should only be added to a control\n    // if it the control is a group. We prefer adding a condition here because:\n    //    - Hooks cannot be called inside conditionals\n    //    - The getLabelProps function below is forced to generate an id\n    //      whether it is needed or not.\n    //    - This is what allows consumers of Paragon to use <Form.Label>\n    //      interchangeably between ControlGroup type controls and regular Controls\n    const labelledByIdsForControl = isControlGroup ? labelledByIds : undefined;\n    return omitUndefinedProperties({\n      ...controlProps,\n      'aria-describedby': classNames(controlProps['aria-describedby'], describedByIds) || undefined,\n      'aria-labelledby': classNames(controlProps['aria-labelledby'], labelledByIdsForControl) || undefined,\n      id: controlId,\n    });\n  }, [\n    isControlGroup,\n    describedByIds,\n    labelledByIds,\n    controlId,\n  ]);\n\n  const getLabelProps = (labelProps) => {\n    const id = registerLabelerId(labelProps?.id);\n    if (isControlGroup) {\n      return { ...labelProps, id };\n    }\n    return { ...labelProps, htmlFor: controlId };\n  };\n\n  const getDescriptorProps = (descriptorProps) => {\n    const id = registerDescriptorId(descriptorProps?.id);\n    return { ...descriptorProps, id };\n  };\n\n  // eslint-disable-next-line react/jsx-no-constructed-context-values\n  const contextValue = {\n    getControlProps,\n    getLabelProps,\n    getDescriptorProps,\n    useSetIsControlGroupEffect,\n    isControlGroup,\n    controlId,\n    isInvalid,\n    isValid,\n    size,\n    hasFormGroupProvider: true,\n  };\n\n  return (\n    <FormGroupContext.Provider value={contextValue}>\n      {children}\n    </FormGroupContext.Provider>\n  );\n};\n\nFormGroupContextProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  controlId: PropTypes.string,\n  isInvalid: PropTypes.bool,\n  isValid: PropTypes.bool,\n  size: PropTypes.oneOf([\n    FORM_CONTROL_SIZES.SMALL,\n    FORM_CONTROL_SIZES.LARGE,\n  ]),\n};\n\nFormGroupContextProvider.defaultProps = {\n  controlId: undefined,\n  isInvalid: undefined,\n  isValid: undefined,\n  size: undefined,\n};\n\nexport {\n  FormGroupContext,\n  FormGroupContextProvider,\n  useFormGroupContext,\n};\n"],"mappings":"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"}