{"version":3,"file":"hooks.js","names":["_react","_interopRequireDefault","require","_redux","_api","requests","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","state","exports","showVideoIdChangeAlert","args","React","useState","sourceHooks","_ref","dispatch","previousVideoId","setAlert","updateVideoURL","videoId","videoUrl","target","value","actions","video","updateField","videoSource","youTubeId","parseYoutubeId","checkTranscriptsForImport","onSuccess","response","data","command","allowTranscriptImport","updateVideoId","updatedVideoId","fallbackHooks","_ref2","fallbackVideos","addFallbackVideo","deleteFallbackVideo","updatedFallbackVideos","splice","indexOf","videoIdChangeAlert","setShowVideoIdChangeAlert","show","dismiss","_default"],"sources":["../../../../../../../../src/editors/containers/VideoEditor/components/VideoSettingsModal/components/VideoSourceWidget/hooks.jsx"],"sourcesContent":["import React from 'react';\nimport { actions } from '../../../../../../data/redux';\nimport { parseYoutubeId } from '../../../../../../data/services/cms/api';\nimport * as requests from '../../../../../../data/redux/thunkActions/requests';\n\nexport const state = {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  showVideoIdChangeAlert: (args) => React.useState(args),\n};\n\nexport const sourceHooks = ({ dispatch, previousVideoId, setAlert }) => ({\n  updateVideoURL: (e, videoId) => {\n    const videoUrl = e.target.value;\n    dispatch(actions.video.updateField({ videoSource: videoUrl }));\n\n    const youTubeId = parseYoutubeId(videoUrl);\n    if (youTubeId) {\n      dispatch(requests.checkTranscriptsForImport({\n        videoId,\n        youTubeId,\n        onSuccess: (response) => {\n          if (response.data.command === 'import') {\n            dispatch(actions.video.updateField({\n              allowTranscriptImport: true,\n            }));\n          }\n        },\n      }));\n    }\n  },\n  updateVideoId: (e) => {\n    const updatedVideoId = e.target.value;\n    if (previousVideoId !== updatedVideoId && updatedVideoId) {\n      setAlert();\n    }\n    dispatch(actions.video.updateField({ videoId: updatedVideoId }));\n  },\n});\n\nexport const fallbackHooks = ({ fallbackVideos, dispatch }) => ({\n  addFallbackVideo: () => dispatch(actions.video.updateField({ fallbackVideos: [...fallbackVideos, ''] })),\n  deleteFallbackVideo: (videoUrl) => {\n    const updatedFallbackVideos = fallbackVideos.splice(fallbackVideos.indexOf(videoUrl), 1);\n    dispatch(actions.video.updateField({ fallbackVideos: updatedFallbackVideos }));\n  },\n});\n\nexport const videoIdChangeAlert = () => {\n  const [showVideoIdChangeAlert, setShowVideoIdChangeAlert] = state.showVideoIdChangeAlert(false);\n  return {\n    videoIdChangeAlert: {\n      show: showVideoIdChangeAlert,\n      set: () => setShowVideoIdChangeAlert(true),\n      dismiss: () => setShowVideoIdChangeAlert(false),\n    },\n  };\n};\n\nexport default {\n  videoIdChangeAlert,\n  sourceHooks,\n  fallbackHooks,\n};\n"],"mappings":"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"}