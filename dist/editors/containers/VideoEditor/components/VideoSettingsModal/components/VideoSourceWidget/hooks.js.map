{"version":3,"file":"hooks.js","names":["_react","_interopRequireDefault","require","_redux","_api","requests","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","state","exports","showVideoIdChangeAlert","args","React","useState","sourceHooks","_ref","dispatch","previousVideoId","setAlert","updateVideoURL","e","videoId","videoUrl","target","value","actions","video","updateField","videoSource","youTubeId","parseYoutubeId","checkTranscriptsForImport","onSuccess","response","data","command","allowTranscriptImport","updateVideoId","updatedVideoId","fallbackHooks","_ref2","fallbackVideos","addFallbackVideo","deleteFallbackVideo","updatedFallbackVideos","splice","indexOf","videoIdChangeAlert","setShowVideoIdChangeAlert","show","dismiss","_default"],"sources":["../../../../../../../../src/editors/containers/VideoEditor/components/VideoSettingsModal/components/VideoSourceWidget/hooks.jsx"],"sourcesContent":["import React from 'react';\nimport { actions } from '../../../../../../data/redux';\nimport { parseYoutubeId } from '../../../../../../data/services/cms/api';\nimport * as requests from '../../../../../../data/redux/thunkActions/requests';\n\nexport const state = {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  showVideoIdChangeAlert: (args) => React.useState(args),\n};\n\nexport const sourceHooks = ({ dispatch, previousVideoId, setAlert }) => ({\n  updateVideoURL: (e, videoId) => {\n    const videoUrl = e.target.value;\n    dispatch(actions.video.updateField({ videoSource: videoUrl }));\n\n    const youTubeId = parseYoutubeId(videoUrl);\n    if (youTubeId) {\n      dispatch(requests.checkTranscriptsForImport({\n        videoId,\n        youTubeId,\n        onSuccess: (response) => {\n          if (response.data.command === 'import') {\n            dispatch(actions.video.updateField({\n              allowTranscriptImport: true,\n            }));\n          }\n        },\n      }));\n    }\n  },\n  updateVideoId: (e) => {\n    const updatedVideoId = e.target.value;\n    if (previousVideoId !== updatedVideoId && updatedVideoId) {\n      setAlert();\n    }\n    dispatch(actions.video.updateField({ videoId: updatedVideoId }));\n  },\n});\n\nexport const fallbackHooks = ({ fallbackVideos, dispatch }) => ({\n  addFallbackVideo: () => dispatch(actions.video.updateField({ fallbackVideos: [...fallbackVideos, ''] })),\n  deleteFallbackVideo: (videoUrl) => {\n    const updatedFallbackVideos = fallbackVideos.splice(fallbackVideos.indexOf(videoUrl), 1);\n    dispatch(actions.video.updateField({ fallbackVideos: updatedFallbackVideos }));\n  },\n});\n\nexport const videoIdChangeAlert = () => {\n  const [showVideoIdChangeAlert, setShowVideoIdChangeAlert] = state.showVideoIdChangeAlert(false);\n  return {\n    videoIdChangeAlert: {\n      show: showVideoIdChangeAlert,\n      set: () => setShowVideoIdChangeAlert(true),\n      dismiss: () => setShowVideoIdChangeAlert(false),\n    },\n  };\n};\n\nexport default {\n  videoIdChangeAlert,\n  sourceHooks,\n  fallbackHooks,\n};\n"],"mappings":"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"}