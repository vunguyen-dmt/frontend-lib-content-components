{"version":3,"file":"index.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_paragon","_i18n","_redux","_requests","_EditorContainer","_RawEditor","hooks","_interopRequireWildcard","_messages","_TinyMceWidget","_hooks2","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","TextEditor","_ref","onClose","returnFunction","isRaw","blockValue","blockFailed","initializeEditor","assetsFinished","assets","intl","editorRef","refReady","setEditorRef","prepareEditorRef","selectEditor","jsx","content","editorType","editorContentHtml","data","minHeight","height","getContent","children","jsxs","className","Toast","show","nullMethod","FormattedMessage","messages","couldNotLoadTextContext","Spinner","animation","screenreadertext","formatMessage","spinnerScreenReaderText","exports","defaultProps","propTypes","PropTypes","func","isRequired","shape","string","bool","intlShape","mapStateToProps","state","selectors","app","requests","isFailed","requestKey","RequestKeys","fetchBlock","isFinished","fetchAssets","mapDispatchToProps","actions","_default","injectIntl","connect"],"sources":["../../../../src/editors/containers/TextEditor/index.jsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport {\n  Spinner,\n  Toast,\n} from '@edx/paragon';\nimport { FormattedMessage, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\n\nimport { actions, selectors } from '../../data/redux';\nimport { RequestKeys } from '../../data/constants/requests';\n\nimport EditorContainer from '../EditorContainer';\nimport RawEditor from '../../sharedComponents/RawEditor';\nimport * as hooks from './hooks';\nimport messages from './messages';\nimport TinyMceWidget from '../../sharedComponents/TinyMceWidget';\nimport { prepareEditorRef } from '../../sharedComponents/TinyMceWidget/hooks';\n\nexport const TextEditor = ({\n  onClose,\n  returnFunction,\n  // redux\n  isRaw,\n  blockValue,\n  blockFailed,\n  initializeEditor,\n  assetsFinished,\n  assets,\n  // inject\n  intl,\n}) => {\n  const { editorRef, refReady, setEditorRef } = prepareEditorRef();\n\n  if (!refReady) { return null; }\n\n  const selectEditor = () => {\n    if (isRaw) {\n      return (\n        <RawEditor\n          editorRef={editorRef}\n          content={blockValue}\n        />\n      );\n    }\n    return (\n      <TinyMceWidget\n        editorType=\"text\"\n        editorRef={editorRef}\n        editorContentHtml={blockValue ? blockValue.data.data : ''}\n        setEditorRef={setEditorRef}\n        minHeight={500}\n        height=\"100%\"\n        initializeEditor={initializeEditor}\n      />\n    );\n  };\n\n  return (\n    <EditorContainer\n      getContent={hooks.getContent({ editorRef, isRaw, assets })}\n      onClose={onClose}\n      returnFunction={returnFunction}\n    >\n      <div className=\"editor-body h-75 overflow-auto\">\n        <Toast show={blockFailed} onClose={hooks.nullMethod}>\n          <FormattedMessage {...messages.couldNotLoadTextContext} />\n        </Toast>\n\n        {(!assetsFinished)\n          ? (\n            <div className=\"text-center p-6\">\n              <Spinner\n                animation=\"border\"\n                className=\"m-3\"\n                screenreadertext={intl.formatMessage(messages.spinnerScreenReaderText)}\n              />\n            </div>\n          ) : (selectEditor())}\n      </div>\n    </EditorContainer>\n  );\n};\nTextEditor.defaultProps = {\n  blockValue: null,\n  isRaw: null,\n  assetsFinished: null,\n  assets: null,\n  returnFunction: null,\n};\nTextEditor.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  returnFunction: PropTypes.func,\n  // redux\n  blockValue: PropTypes.shape({\n    data: PropTypes.shape({ data: PropTypes.string }),\n  }),\n  blockFailed: PropTypes.bool.isRequired,\n  initializeEditor: PropTypes.func.isRequired,\n  isRaw: PropTypes.bool,\n  assetsFinished: PropTypes.bool,\n  assets: PropTypes.shape({}),\n  // inject\n  intl: intlShape.isRequired,\n};\n\nexport const mapStateToProps = (state) => ({\n  blockValue: selectors.app.blockValue(state),\n  blockFailed: selectors.requests.isFailed(state, { requestKey: RequestKeys.fetchBlock }),\n  isRaw: selectors.app.isRaw(state),\n  assetsFinished: selectors.requests.isFinished(state, { requestKey: RequestKeys.fetchAssets }),\n  assets: selectors.app.assets(state),\n});\n\nexport const mapDispatchToProps = {\n  initializeEditor: actions.app.initializeEditor,\n};\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(TextEditor));\n"],"mappings":"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"}