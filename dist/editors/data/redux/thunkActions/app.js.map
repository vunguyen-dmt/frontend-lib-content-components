{"version":3,"file":"app.js","names":["_utils","require","_","requests","_interopRequireWildcard","_module","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","fetchBlock","dispatch","onSuccess","response","actions","app","setBlockValue","onFailure","e","console","log","fetchFailure","exports","fetchStudioView","setStudioView","fetchUnit","setUnitUrl","fetchAssets","setAssets","fetchVideos","setVideos","data","videos","fetchCourseDetails","setCourseDetails","initialize","module","saveBlock","_ref","content","returnToUnit","setBlockContent","setSaveResponse","uploadImage","_ref2","file","setSelection","uploadAsset","asset","camelizeKeys","_default","StrictDict"],"sources":["../../../../../src/editors/data/redux/thunkActions/app.js"],"sourcesContent":["import { StrictDict, camelizeKeys } from '../../../utils';\n/* eslint-disable import/no-cycle */\nimport { actions } from '..';\nimport * as requests from './requests';\nimport * as module from './app';\n\nexport const fetchBlock = () => (dispatch) => {\n  dispatch(requests.fetchBlock({\n    onSuccess: (response) => dispatch(actions.app.setBlockValue(response)),\n    // eslint-disable-next-line\n    onFailure: (e) => console.log({ fetchFailure: e }),\n  }));\n};\n\nexport const fetchStudioView = () => (dispatch) => {\n  dispatch(requests.fetchStudioView({\n    onSuccess: (response) => dispatch(actions.app.setStudioView(response)),\n    onFailure: (e) => dispatch(actions.app.setStudioView(e)),\n  }));\n};\n\nexport const fetchUnit = () => (dispatch) => {\n  dispatch(requests.fetchUnit({\n    onSuccess: (response) => dispatch(actions.app.setUnitUrl(response)),\n    onFailure: (e) => dispatch(actions.app.setUnitUrl(e)),\n  }));\n};\n\nexport const fetchAssets = () => (dispatch) => {\n  dispatch(requests.fetchAssets({\n    onSuccess: (response) => dispatch(actions.app.setAssets(response)),\n  }));\n};\n\nexport const fetchVideos = () => (dispatch) => {\n  dispatch(requests.fetchVideos({\n    onSuccess: (response) => dispatch(actions.app.setVideos(response.data.videos)),\n  }));\n};\n\nexport const fetchCourseDetails = () => (dispatch) => {\n  dispatch(requests.fetchCourseDetails({\n    onSuccess: (response) => dispatch(actions.app.setCourseDetails(response)),\n    onFailure: (e) => dispatch(actions.app.setCourseDetails(e)),\n  }));\n};\n\n/**\n * @param {string} studioEndpointUrl\n * @param {string} blockId\n * @param {string} learningContextId\n * @param {string} blockType\n */\nexport const initialize = (data) => (dispatch) => {\n  dispatch(actions.app.initialize(data));\n  dispatch(module.fetchBlock());\n  dispatch(module.fetchUnit());\n  dispatch(module.fetchStudioView());\n  dispatch(module.fetchAssets());\n  dispatch(module.fetchVideos());\n  dispatch(module.fetchCourseDetails());\n};\n\n/**\n * @param {func} onSuccess\n */\nexport const saveBlock = ({ content, returnToUnit }) => (dispatch) => {\n  dispatch(actions.app.setBlockContent(content));\n  dispatch(requests.saveBlock({\n    content,\n    onSuccess: (response) => {\n      dispatch(actions.app.setSaveResponse(response));\n      returnToUnit();\n    },\n  }));\n};\n\nexport const uploadImage = ({ file, setSelection }) => (dispatch) => {\n  dispatch(requests.uploadAsset({\n    asset: file,\n    onSuccess: (response) => setSelection(camelizeKeys(response.data.asset)),\n  }));\n};\n\nexport default StrictDict({\n  fetchBlock,\n  fetchCourseDetails,\n  fetchStudioView,\n  fetchUnit,\n  fetchVideos,\n  initialize,\n  saveBlock,\n  fetchAssets,\n  uploadImage,\n});\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,CAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAC,uBAAA,CAAAH,OAAA;AACA,IAAAI,OAAA,GAAAD,uBAAA,CAAAH,OAAA;AAAgC,SAAAK,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAHhC;;AAKO,MAAMW,UAAU,GAAGA,CAAA,KAAOC,QAAQ,IAAK;EAC5CA,QAAQ,CAAC1B,QAAQ,CAACyB,UAAU,CAAC;IAC3BE,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACC,aAAa,CAACH,QAAQ,CAAC,CAAC;IACtE;IACAI,SAAS,EAAGC,CAAC,IAAKC,OAAO,CAACC,GAAG,CAAC;MAAEC,YAAY,EAAEH;IAAE,CAAC;EACnD,CAAC,CAAC,CAAC;AACL,CAAC;AAACI,OAAA,CAAAZ,UAAA,GAAAA,UAAA;AAEK,MAAMa,eAAe,GAAGA,CAAA,KAAOZ,QAAQ,IAAK;EACjDA,QAAQ,CAAC1B,QAAQ,CAACsC,eAAe,CAAC;IAChCX,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACS,aAAa,CAACX,QAAQ,CAAC,CAAC;IACtEI,SAAS,EAAGC,CAAC,IAAKP,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACS,aAAa,CAACN,CAAC,CAAC;EACzD,CAAC,CAAC,CAAC;AACL,CAAC;AAACI,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAEK,MAAME,SAAS,GAAGA,CAAA,KAAOd,QAAQ,IAAK;EAC3CA,QAAQ,CAAC1B,QAAQ,CAACwC,SAAS,CAAC;IAC1Bb,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACW,UAAU,CAACb,QAAQ,CAAC,CAAC;IACnEI,SAAS,EAAGC,CAAC,IAAKP,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACW,UAAU,CAACR,CAAC,CAAC;EACtD,CAAC,CAAC,CAAC;AACL,CAAC;AAACI,OAAA,CAAAG,SAAA,GAAAA,SAAA;AAEK,MAAME,WAAW,GAAGA,CAAA,KAAOhB,QAAQ,IAAK;EAC7CA,QAAQ,CAAC1B,QAAQ,CAAC0C,WAAW,CAAC;IAC5Bf,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACa,SAAS,CAACf,QAAQ,CAAC;EACnE,CAAC,CAAC,CAAC;AACL,CAAC;AAACS,OAAA,CAAAK,WAAA,GAAAA,WAAA;AAEK,MAAME,WAAW,GAAGA,CAAA,KAAOlB,QAAQ,IAAK;EAC7CA,QAAQ,CAAC1B,QAAQ,CAAC4C,WAAW,CAAC;IAC5BjB,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACe,SAAS,CAACjB,QAAQ,CAACkB,IAAI,CAACC,MAAM,CAAC;EAC/E,CAAC,CAAC,CAAC;AACL,CAAC;AAACV,OAAA,CAAAO,WAAA,GAAAA,WAAA;AAEK,MAAMI,kBAAkB,GAAGA,CAAA,KAAOtB,QAAQ,IAAK;EACpDA,QAAQ,CAAC1B,QAAQ,CAACgD,kBAAkB,CAAC;IACnCrB,SAAS,EAAGC,QAAQ,IAAKF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACmB,gBAAgB,CAACrB,QAAQ,CAAC,CAAC;IACzEI,SAAS,EAAGC,CAAC,IAAKP,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACmB,gBAAgB,CAAChB,CAAC,CAAC;EAC5D,CAAC,CAAC,CAAC;AACL,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AALAI,OAAA,CAAAW,kBAAA,GAAAA,kBAAA;AAMO,MAAME,UAAU,GAAIJ,IAAI,IAAMpB,QAAQ,IAAK;EAChDA,QAAQ,CAACG,SAAO,CAACC,GAAG,CAACoB,UAAU,CAACJ,IAAI,CAAC,CAAC;EACtCpB,QAAQ,CAACyB,OAAM,CAAC1B,UAAU,CAAC,CAAC,CAAC;EAC7BC,QAAQ,CAACyB,OAAM,CAACX,SAAS,CAAC,CAAC,CAAC;EAC5Bd,QAAQ,CAACyB,OAAM,CAACb,eAAe,CAAC,CAAC,CAAC;EAClCZ,QAAQ,CAACyB,OAAM,CAACT,WAAW,CAAC,CAAC,CAAC;EAC9BhB,QAAQ,CAACyB,OAAM,CAACP,WAAW,CAAC,CAAC,CAAC;EAC9BlB,QAAQ,CAACyB,OAAM,CAACH,kBAAkB,CAAC,CAAC,CAAC;AACvC,CAAC;;AAED;AACA;AACA;AAFAX,OAAA,CAAAa,UAAA,GAAAA,UAAA;AAGO,MAAME,SAAS,GAAGC,IAAA;EAAA,IAAC;IAAEC,OAAO;IAAEC;EAAa,CAAC,GAAAF,IAAA;EAAA,OAAM3B,QAAQ,IAAK;IACpEA,QAAQ,CAACG,SAAO,CAACC,GAAG,CAAC0B,eAAe,CAACF,OAAO,CAAC,CAAC;IAC9C5B,QAAQ,CAAC1B,QAAQ,CAACoD,SAAS,CAAC;MAC1BE,OAAO;MACP3B,SAAS,EAAGC,QAAQ,IAAK;QACvBF,QAAQ,CAACG,SAAO,CAACC,GAAG,CAAC2B,eAAe,CAAC7B,QAAQ,CAAC,CAAC;QAC/C2B,YAAY,CAAC,CAAC;MAChB;IACF,CAAC,CAAC,CAAC;EACL,CAAC;AAAA;AAAClB,OAAA,CAAAe,SAAA,GAAAA,SAAA;AAEK,MAAMM,WAAW,GAAGC,KAAA;EAAA,IAAC;IAAEC,IAAI;IAAEC;EAAa,CAAC,GAAAF,KAAA;EAAA,OAAMjC,QAAQ,IAAK;IACnEA,QAAQ,CAAC1B,QAAQ,CAAC8D,WAAW,CAAC;MAC5BC,KAAK,EAAEH,IAAI;MACXjC,SAAS,EAAGC,QAAQ,IAAKiC,YAAY,CAAC,IAAAG,mBAAY,EAACpC,QAAQ,CAACkB,IAAI,CAACiB,KAAK,CAAC;IACzE,CAAC,CAAC,CAAC;EACL,CAAC;AAAA;AAAC1B,OAAA,CAAAqB,WAAA,GAAAA,WAAA;AAAA,IAAAO,QAAA,GAEa,IAAAC,iBAAU,EAAC;EACxBzC,UAAU;EACVuB,kBAAkB;EAClBV,eAAe;EACfE,SAAS;EACTI,WAAW;EACXM,UAAU;EACVE,SAAS;EACTV,WAAW;EACXgB;AACF,CAAC,CAAC;AAAArB,OAAA,CAAA3B,OAAA,GAAAuD,QAAA"}