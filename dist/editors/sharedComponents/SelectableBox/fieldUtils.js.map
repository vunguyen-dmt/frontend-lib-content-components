{"version":3,"file":"fieldUtils.js","names":["_classnames","_interopRequireDefault","require","_react","_newId","obj","__esModule","default","omitUndefinedProperties","arguments","length","undefined","Object","entries","reduce","acc","_ref","key","value","exports","callAllHandlers","_len","handlers","Array","_key","unifiedEventHandler","event","filter","handler","forEach","useHasValue","_ref2","defaultValue","hasUncontrolledValue","setHasUncontrolledValue","useState","hasValue","handleInputEvent","e","target","useIdList","uniqueIdPrefix","initialList","idList","setIdList","addId","idToAdd","oldIdList","getNewId","newId","removeId","idToRemove","id","useRegisteredId","explicitlyRegisteredId","registeredId","setRegisteredId","useEffect","mergeAttributeValues","_len2","values","_key2","mergedValues","classNames"],"sources":["../../../../src/editors/sharedComponents/SelectableBox/fieldUtils.js"],"sourcesContent":["import classNames from 'classnames';\nimport { useState, useEffect } from 'react';\nimport newId from './newId';\n\nconst omitUndefinedProperties = (obj = {}) => Object.entries(obj)\n  .reduce((acc, [key, value]) => {\n    if (value !== undefined) {\n      acc[key] = value;\n    }\n    return acc;\n  }, {});\n\nconst callAllHandlers = (...handlers) => {\n  const unifiedEventHandler = (event) => {\n    handlers\n      .filter(handler => typeof handler === 'function')\n      .forEach(handler => handler(event));\n  };\n  return unifiedEventHandler;\n};\n\nconst useHasValue = ({ defaultValue, value }) => {\n  const [hasUncontrolledValue, setHasUncontrolledValue] = useState(!!defaultValue || defaultValue === 0);\n  const hasValue = !!value || value === 0 || hasUncontrolledValue;\n  const handleInputEvent = (e) => setHasUncontrolledValue(e.target.value);\n  return [hasValue, handleInputEvent];\n};\n\nconst useIdList = (uniqueIdPrefix, initialList) => {\n  const [idList, setIdList] = useState(initialList || []);\n  const addId = (idToAdd) => {\n    setIdList(oldIdList => [...oldIdList, idToAdd]);\n    return idToAdd;\n  };\n  const getNewId = () => {\n    const idToAdd = newId(`${uniqueIdPrefix}-`);\n    return addId(idToAdd);\n  };\n  const removeId = (idToRemove) => {\n    setIdList(oldIdList => oldIdList.filter(id => id !== idToRemove));\n  };\n\n  const useRegisteredId = (explicitlyRegisteredId) => {\n    const [registeredId, setRegisteredId] = useState(explicitlyRegisteredId);\n    useEffect(() => {\n      if (explicitlyRegisteredId) {\n        addId(explicitlyRegisteredId);\n      } else if (!registeredId) {\n        setRegisteredId(getNewId(uniqueIdPrefix));\n      }\n      return () => removeId(registeredId);\n    }, [registeredId, explicitlyRegisteredId]);\n    return registeredId;\n  };\n\n  return [idList, useRegisteredId];\n};\n\nconst mergeAttributeValues = (...values) => {\n  const mergedValues = classNames(values);\n  return mergedValues || undefined;\n};\n\nexport {\n  callAllHandlers,\n  useHasValue,\n  mergeAttributeValues,\n  useIdList,\n  omitUndefinedProperties,\n};\n"],"mappings":"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"}