{"version":3,"file":"VideoUploader.js","names":["_react","_interopRequireDefault","require","_propTypes","_i18n","_paragon","_icons","_reactRedux","_redux","hooks","_interopRequireWildcard","_messages","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","URLUploader","textInputValue","setTextInputValue","React","useState","onURLUpload","onVideoUpload","intl","useIntl","jsxs","className","children","jsx","Icon","src","FileUpload","style","height","width","formatMessage","messages","dropVideoFileHere","info","InputGroup","FormControl","placeholder","pasteURL","borderless","onClick","event","stopPropagation","onChange","target","value","trailingElement","IconButton","alt","submitButtonAltText","ArrowForward","iconAs","size","trim","VideoUploader","_ref","setLoading","dispatch","useDispatch","goBack","useHistoryGoBack","handleProcessUpload","_ref2","fileData","thunkActions","video","uploadVideo","supportedFiles","setLoadSpinner","postUploadRedirect","closeButtonAltText","Close","Dropzone","accept","onProcessUpload","inputComponent","exports","propTypes","PropTypes","func","isRequired","_default"],"sources":["../../../../src/editors/containers/VideoUploadEditor/VideoUploader.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from '@edx/frontend-platform/i18n';\nimport {\n  Icon, IconButton, Dropzone, InputGroup, FormControl,\n} from '@openedx/paragon';\nimport { ArrowForward, FileUpload, Close } from '@openedx/paragon/icons';\nimport { useDispatch } from 'react-redux';\nimport { thunkActions } from '../../data/redux';\nimport * as hooks from './hooks';\nimport messages from './messages';\n\nconst URLUploader = () => {\n  const [textInputValue, setTextInputValue] = React.useState('');\n  const onURLUpload = hooks.onVideoUpload('selectedVideoUrl');\n  const intl = useIntl();\n  return (\n    <div className=\"d-flex flex-column\">\n      <div className=\"justify-content-center align-self-center rounded-circle bg-light-300 p-2.5\">\n        <Icon src={FileUpload} className=\"text-muted\" style={{ height: '2rem', width: '2rem' }} />\n      </div>\n      <div className=\"d-flex align-self-center justify-content-center flex-wrap flex-column pt-3\">\n        <span>{intl.formatMessage(messages.dropVideoFileHere)}</span>\n        <span className=\"x-small align-self-center pt-2\">{intl.formatMessage(messages.info)}</span>\n      </div>\n      <div className=\"small align-self-center justify-content-center mx-2 text-dark font-weight-normal pt-3\">\n        OR\n      </div>\n      <div className=\"zindex-9 video-id-prompt py-3\">\n        <InputGroup>\n          <FormControl\n            className=\"m-0\"\n            placeholder={intl.formatMessage(messages.pasteURL)}\n            aria-label={intl.formatMessage(messages.pasteURL)}\n            aria-describedby=\"basic-addon2\"\n            borderless\n            onClick={(event) => { event.stopPropagation(); }}\n            onChange={(event) => { setTextInputValue(event.target.value); }}\n            trailingElement={(\n              <IconButton\n                className=\"url-submit-button\"\n                alt={intl.formatMessage(messages.submitButtonAltText)}\n                src={ArrowForward}\n                iconAs={Icon}\n                size=\"inline\"\n                onClick={(event) => {\n                  event.stopPropagation();\n                  if (textInputValue.trim() !== '') {\n                    onURLUpload(textInputValue);\n                  }\n                }}\n              />\n            )}\n          />\n        </InputGroup>\n      </div>\n    </div>\n  );\n};\n\nexport const VideoUploader = ({ setLoading }) => {\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const goBack = hooks.useHistoryGoBack();\n\n  const handleProcessUpload = ({ fileData }) => {\n    dispatch(thunkActions.video.uploadVideo({\n      supportedFiles: [fileData],\n      setLoadSpinner: setLoading,\n      postUploadRedirect: hooks.onVideoUpload('selectedVideoId'),\n    }));\n  };\n\n  return (\n    <div className=\"d-flex flex-column\">\n      <div className=\"d-flex justify-content-end flex-row\">\n        <IconButton\n          className=\"position-absolute mr-2 mt-2\"\n          alt={intl.formatMessage(messages.closeButtonAltText)}\n          src={Close}\n          iconAs={Icon}\n          onClick={goBack}\n        />\n      </div>\n      <Dropzone\n        accept={{ 'video/*': ['.mp4', '.mov'] }}\n        onProcessUpload={handleProcessUpload}\n        inputComponent={<URLUploader />}\n      />\n    </div>\n  );\n};\n\nVideoUploader.propTypes = {\n  setLoading: PropTypes.func.isRequired,\n};\n\nexport default VideoUploader;\n"],"mappings":"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"}