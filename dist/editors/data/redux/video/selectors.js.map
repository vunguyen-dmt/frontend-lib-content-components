{"version":3,"file":"selectors.js","names":["_reselect","require","_utils","_video","_reducer","_module","_interopRequireWildcard","AppSelectors","_urls","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","stateKeys","keyStore","initialState","video","state","exports","simpleSelectors","videoSource","videoId","fallbackVideos","allowVideoDownloads","videoSharingEnabledForCourse","videoSharingLearnMoreLink","videoSharingEnabledForAll","allowVideoSharing","thumbnail","transcripts","selectedVideoTranscriptUrls","allowTranscriptDownloads","duration","showTranscriptByDefault","handout","licenseType","licenseDetails","courseLicenseType","courseLicenseDetails","allowThumbnailUpload","allowTranscriptImport","reduce","openLanguages","createSelector","module","videoTranscriptLanguages","open","lang","includes","getTranscriptDownloadUrl","studioEndpointUrl","blockId","_ref","language","downloadVideoTranscriptURL","buildTranscriptUrl","_ref2","transcriptUrl","mediaTranscriptURL","getHandoutDownloadUrl","_ref3","downloadVideoHandoutUrl","videoSettings","_default"],"sources":["../../../../../src/editors/data/redux/video/selectors.js"],"sourcesContent":["import { createSelector } from 'reselect';\n\nimport { keyStore } from '../../../utils';\nimport { videoTranscriptLanguages } from '../../constants/video';\n\nimport { initialState } from './reducer';\nimport * as module from './selectors';\nimport * as AppSelectors from '../app/selectors';\nimport { downloadVideoTranscriptURL, downloadVideoHandoutUrl, mediaTranscriptURL } from '../../services/cms/urls';\n\nconst stateKeys = keyStore(initialState);\n\nexport const video = (state) => state.video;\n\nexport const simpleSelectors = [\n  stateKeys.videoSource,\n  stateKeys.videoId,\n  stateKeys.fallbackVideos,\n  stateKeys.allowVideoDownloads,\n  stateKeys.videoSharingEnabledForCourse,\n  stateKeys.videoSharingLearnMoreLink,\n  stateKeys.videoSharingEnabledForAll,\n  stateKeys.allowVideoSharing,\n  stateKeys.thumbnail,\n  stateKeys.transcripts,\n  stateKeys.selectedVideoTranscriptUrls,\n  stateKeys.allowTranscriptDownloads,\n  stateKeys.duration,\n  stateKeys.showTranscriptByDefault,\n  stateKeys.handout,\n  stateKeys.licenseType,\n  stateKeys.licenseDetails,\n  stateKeys.courseLicenseType,\n  stateKeys.courseLicenseDetails,\n  stateKeys.allowThumbnailUpload,\n  stateKeys.allowTranscriptImport,\n].reduce((obj, key) => ({ ...obj, [key]: state => state.video[key] }), {});\n\nexport const openLanguages = createSelector(\n  [module.simpleSelectors.transcripts],\n  (transcripts) => {\n    if (!transcripts) {\n      return videoTranscriptLanguages;\n    }\n    const open = Object.keys(videoTranscriptLanguages).filter(\n      (lang) => !transcripts.includes(lang),\n    );\n    return open;\n  },\n);\n\nexport const getTranscriptDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl, AppSelectors.simpleSelectors.blockId],\n  (studioEndpointUrl, blockId) => ({ language }) => downloadVideoTranscriptURL({\n    studioEndpointUrl,\n    blockId,\n    language,\n  }),\n);\n\nexport const buildTranscriptUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl],\n  (studioEndpointUrl) => ({ transcriptUrl }) => mediaTranscriptURL({\n    studioEndpointUrl,\n    transcriptUrl,\n  }),\n);\n\nexport const getHandoutDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl],\n  (studioEndpointUrl) => ({ handout }) => downloadVideoHandoutUrl({\n    studioEndpointUrl,\n    handout,\n  }),\n);\n\nexport const videoSettings = createSelector(\n  [\n    module.simpleSelectors.videoSource,\n    module.simpleSelectors.videoId,\n    module.simpleSelectors.fallbackVideos,\n    module.simpleSelectors.allowVideoDownloads,\n    module.simpleSelectors.allowVideoSharing,\n    module.simpleSelectors.thumbnail,\n    module.simpleSelectors.transcripts,\n    module.simpleSelectors.selectedVideoTranscriptUrls,\n    module.simpleSelectors.allowTranscriptDownloads,\n    module.simpleSelectors.duration,\n    module.simpleSelectors.showTranscriptByDefault,\n    module.simpleSelectors.handout,\n    module.simpleSelectors.licenseType,\n    module.simpleSelectors.licenseDetails,\n  ],\n  (\n    videoSource,\n    videoId,\n    fallbackVideos,\n    allowVideoDownloads,\n    allowVideoSharing,\n    thumbnail,\n    transcripts,\n    selectedVideoTranscriptUrls,\n    allowTranscriptDownloads,\n    duration,\n    showTranscriptByDefault,\n    handout,\n    licenseType,\n    licenseDetails,\n  ) => (\n    {\n      videoSource,\n      videoId,\n      fallbackVideos,\n      allowVideoDownloads,\n      allowVideoSharing,\n      thumbnail,\n      transcripts,\n      selectedVideoTranscriptUrls,\n      allowTranscriptDownloads,\n      duration,\n      showTranscriptByDefault,\n      handout,\n      licenseType,\n      licenseDetails,\n    }\n  ),\n);\n\nexport default {\n  ...simpleSelectors,\n  openLanguages,\n  getTranscriptDownloadUrl,\n  buildTranscriptUrl,\n  getHandoutDownloadUrl,\n  videoSettings,\n};\n"],"mappings":"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"}