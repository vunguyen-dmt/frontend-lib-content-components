{"version":3,"file":"selectors.js","names":["_reselect","require","_utils","_video","_reducer","_module","_interopRequireWildcard","AppSelectors","_urls","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","stateKeys","keyStore","initialState","video","state","exports","simpleSelectors","videoSource","videoId","fallbackVideos","allowVideoDownloads","videoSharingEnabledForCourse","videoSharingLearnMoreLink","videoSharingEnabledForAll","allowVideoSharing","thumbnail","transcripts","selectedVideoTranscriptUrls","allowTranscriptDownloads","duration","showTranscriptByDefault","handout","licenseType","licenseDetails","courseLicenseType","courseLicenseDetails","allowThumbnailUpload","allowTranscriptImport","reduce","openLanguages","createSelector","module","videoTranscriptLanguages","open","lang","includes","getTranscriptDownloadUrl","studioEndpointUrl","blockId","_ref","language","downloadVideoTranscriptURL","buildTranscriptUrl","_ref2","transcriptUrl","mediaTranscriptURL","getHandoutDownloadUrl","_ref3","downloadVideoHandoutUrl","videoSettings","_default"],"sources":["../../../../../src/editors/data/redux/video/selectors.js"],"sourcesContent":["import { createSelector } from 'reselect';\n\nimport { keyStore } from '../../../utils';\nimport { videoTranscriptLanguages } from '../../constants/video';\n\nimport { initialState } from './reducer';\nimport * as module from './selectors';\nimport * as AppSelectors from '../app/selectors';\nimport { downloadVideoTranscriptURL, downloadVideoHandoutUrl, mediaTranscriptURL } from '../../services/cms/urls';\n\nconst stateKeys = keyStore(initialState);\n\nexport const video = (state) => state.video;\n\nexport const simpleSelectors = [\n  stateKeys.videoSource,\n  stateKeys.videoId,\n  stateKeys.fallbackVideos,\n  stateKeys.allowVideoDownloads,\n  stateKeys.videoSharingEnabledForCourse,\n  stateKeys.videoSharingLearnMoreLink,\n  stateKeys.videoSharingEnabledForAll,\n  stateKeys.allowVideoSharing,\n  stateKeys.thumbnail,\n  stateKeys.transcripts,\n  stateKeys.selectedVideoTranscriptUrls,\n  stateKeys.allowTranscriptDownloads,\n  stateKeys.duration,\n  stateKeys.showTranscriptByDefault,\n  stateKeys.handout,\n  stateKeys.licenseType,\n  stateKeys.licenseDetails,\n  stateKeys.courseLicenseType,\n  stateKeys.courseLicenseDetails,\n  stateKeys.allowThumbnailUpload,\n  stateKeys.allowTranscriptImport,\n].reduce((obj, key) => ({ ...obj, [key]: state => state.video[key] }), {});\n\nexport const openLanguages = createSelector(\n  [module.simpleSelectors.transcripts],\n  (transcripts) => {\n    if (!transcripts) {\n      return videoTranscriptLanguages;\n    }\n    const open = Object.keys(videoTranscriptLanguages).filter(\n      (lang) => !transcripts.includes(lang),\n    );\n    return open;\n  },\n);\n\nexport const getTranscriptDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl, AppSelectors.simpleSelectors.blockId],\n  (studioEndpointUrl, blockId) => ({ language }) => downloadVideoTranscriptURL({\n    studioEndpointUrl,\n    blockId,\n    language,\n  }),\n);\n\nexport const buildTranscriptUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl],\n  (studioEndpointUrl) => ({ transcriptUrl }) => mediaTranscriptURL({\n    studioEndpointUrl,\n    transcriptUrl,\n  }),\n);\n\nexport const getHandoutDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl],\n  (studioEndpointUrl) => ({ handout }) => downloadVideoHandoutUrl({\n    studioEndpointUrl,\n    handout,\n  }),\n);\n\nexport const videoSettings = createSelector(\n  [\n    module.simpleSelectors.videoSource,\n    module.simpleSelectors.videoId,\n    module.simpleSelectors.fallbackVideos,\n    module.simpleSelectors.allowVideoDownloads,\n    module.simpleSelectors.allowVideoSharing,\n    module.simpleSelectors.thumbnail,\n    module.simpleSelectors.transcripts,\n    module.simpleSelectors.selectedVideoTranscriptUrls,\n    module.simpleSelectors.allowTranscriptDownloads,\n    module.simpleSelectors.duration,\n    module.simpleSelectors.showTranscriptByDefault,\n    module.simpleSelectors.handout,\n    module.simpleSelectors.licenseType,\n    module.simpleSelectors.licenseDetails,\n  ],\n  (\n    videoSource,\n    videoId,\n    fallbackVideos,\n    allowVideoDownloads,\n    allowVideoSharing,\n    thumbnail,\n    transcripts,\n    selectedVideoTranscriptUrls,\n    allowTranscriptDownloads,\n    duration,\n    showTranscriptByDefault,\n    handout,\n    licenseType,\n    licenseDetails,\n  ) => (\n    {\n      videoSource,\n      videoId,\n      fallbackVideos,\n      allowVideoDownloads,\n      allowVideoSharing,\n      thumbnail,\n      transcripts,\n      selectedVideoTranscriptUrls,\n      allowTranscriptDownloads,\n      duration,\n      showTranscriptByDefault,\n      handout,\n      licenseType,\n      licenseDetails,\n    }\n  ),\n);\n\nexport default {\n  ...simpleSelectors,\n  openLanguages,\n  getTranscriptDownloadUrl,\n  buildTranscriptUrl,\n  getHandoutDownloadUrl,\n  videoSettings,\n};\n"],"mappings":"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"}