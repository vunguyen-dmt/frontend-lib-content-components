{"version":3,"file":"hooks.js","names":["_react","require","_messages","_interopRequireDefault","_module","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","durationMatcher","durationWidget","_ref","duration","updateField","setDuration","val","initialState","module","durationString","unsavedDuration","setUnsavedDuration","useState","useEffect","onBlur","index","updateDuration","inputString","target","onChange","onDurationChange","onKeyDown","onDurationKeyDown","getTotalLabel","_ref2","subtitle","intl","stopTime","startTime","formatMessage","messages","fullVideoLength","startsAt","durationStringFromValue","total","custom","exports","seconds","Math","floor","minutes","hours","zeroPad","num","padStart","map","join","_ref3","newDurationString","newValue","valueFromDuration","match","trim","caretPos","document","activeElement","selectionStart","newDuration","event","blur","slice","matches","v","undefined","unshift","x","parseInt","_default"],"sources":["../../../../../../../../src/editors/containers/VideoEditor/components/VideoSettingsModal/components/DurationWidget/hooks.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport messages from '../messages';\n\nimport * as module from './hooks';\n\nconst durationMatcher = /^(\\d{0,2}):?(\\d{0,2})?:?(\\d{0,2})?$/i;\n\nexport const durationWidget = ({ duration, updateField }) => {\n  const setDuration = (val) => updateField({ duration: val });\n  const initialState = module.durationString(duration);\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const [unsavedDuration, setUnsavedDuration] = useState(initialState);\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useEffect(() => {\n    setUnsavedDuration(module.durationString(duration));\n  }, [duration]);\n\n  return {\n    unsavedDuration,\n    onBlur: (index) => (\n      (e) => module.updateDuration({\n        duration,\n        setDuration,\n        unsavedDuration,\n        setUnsavedDuration,\n        index,\n        inputString: e.target.value,\n      })\n    ),\n    onChange: (index) => (\n      (e) => setUnsavedDuration(module.onDurationChange(unsavedDuration, index, e.target.value))\n    ),\n    onKeyDown: (index) => (\n      (e) => setUnsavedDuration(module.onDurationKeyDown(unsavedDuration, index, e))\n    ),\n    getTotalLabel: ({ durationString, subtitle, intl }) => {\n      if (!durationString.stopTime) {\n        if (!durationString.startTime) {\n          return intl.formatMessage(messages.fullVideoLength);\n        }\n        if (subtitle) {\n          return intl.formatMessage(\n            messages.startsAt,\n            { startTime: module.durationStringFromValue(durationString.startTime) },\n          );\n        }\n        return null;\n      }\n      const total = durationString.stopTime - (durationString.startTime || 0);\n      return intl.formatMessage(\n        subtitle ? messages.custom : messages.total,\n        { total: module.durationStringFromValue(total) },\n      );\n    },\n  };\n};\n\n/**\n * durationString(duration)\n * Returns the display value for embedded start and stop times\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @return {object} - start and stop time from incoming object mapped to duration strings.\n */\nexport const durationString = (duration) => ({\n  startTime: module.durationStringFromValue(duration.startTime),\n  stopTime: module.durationStringFromValue(duration.stopTime),\n});\n\n/**\n * durationStringFromValue(value)\n * Returns a duration string in 'hh:mm:ss' format from the given ms value\n * @param {number} value - duration (in milliseconds)\n * @return {string} - duration in 'hh:mm:ss' format\n */\nexport const durationStringFromValue = (value) => {\n  // return 'why';\n  if (!value || typeof value !== 'number' || value <= 0) {\n    return '00:00:00';\n  }\n  const seconds = Math.floor((value / 1000) % 60);\n  const minutes = Math.floor((value / 60000) % 60);\n  const hours = Math.floor((value / 3600000) % 60);\n  const zeroPad = (num) => String(num).padStart(2, '0');\n  return [hours, minutes, seconds].map(zeroPad).join(':');\n};\n\n/**\n * updateDuration({ duration, unsavedDuration, setUnsavedDuration, setDuration })\n * Returns a memoized callback based on inputs that updates unsavedDuration value and form value\n * if the new string is valid (duration stores a number, unsavedDuration stores a string).\n * If the duration string is invalid, resets the unsavedDuration value to the latest good value.\n * @param {object} duration - redux-stored durations in milliseconds\n * @param {object} unsavedDuration - hook-stored duration in 'hh:mm:ss' format\n * @param {func} setDuration - set form value\n * @param {func} setUnsavedDuration - set unsavedDuration object\n * @param {string} index - startTime or stopTime\n * @param {string} inputString - string value of user input for either the start or stop time fields\n * @return {func} - callback to update duration unsavedDurationly and in redux\n *   updateDuration(args)(index, durationString)\n */\nexport const updateDuration = ({\n  duration,\n  unsavedDuration,\n  setDuration,\n  setUnsavedDuration,\n  index,\n  inputString,\n}) => {\n  let newDurationString = inputString;\n  let newValue = module.valueFromDuration(newDurationString);\n  // maxTime is 23:59:59 or 86399 seconds\n  if (newValue > 86399000) {\n    newValue = 86399000;\n  }\n  // stopTime must be at least 1 second, if not zero\n  if (index === 'stopTime' && newValue > 0 && newValue < 1000) {\n    newValue = 1000;\n  }\n  // stopTime must be at least 1 second after startTime, except 0 means no custom stopTime\n  if (index === 'stopTime' && newValue > 0 && newValue < (duration.startTime + 1000)) {\n    newValue = duration.startTime + 1000;\n  }\n  // startTime must be at least 1 second before stopTime, except when stopTime is less than a second\n  // (stopTime should only be less than a second if it's zero, but we're being paranoid)\n  if (index === 'startTime' && duration.stopTime >= 1000 && newValue > (duration.stopTime - 1000)) {\n    newValue = duration.stopTime - 1000;\n  }\n  newDurationString = module.durationStringFromValue(newValue);\n  setUnsavedDuration({ ...unsavedDuration, [index]: newDurationString });\n  setDuration({ ...duration, [index]: newValue });\n};\n\n/**\n * onDurationChange(duration)\n * Returns a new duration value based on onChange event\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @param {string} index - 'startTime or 'stopTime'\n * @param {string} val - duration in 'hh:mm:ss' format\n * @return {object} duration - object containing startTime and stopTime millisecond values\n */\nexport const onDurationChange = (duration, index, val) => {\n  const match = val.trim().match(durationMatcher);\n  if (!match) {\n    return duration;\n  }\n\n  const caretPos = document.activeElement.selectionStart;\n  let newDuration = val;\n  if (caretPos === newDuration.length && (newDuration.length === 2 || newDuration.length === 5)) {\n    newDuration += ':';\n  }\n\n  return {\n    ...duration,\n    [index]: newDuration,\n  };\n};\n\n/**\n * onDurationKeyDown(duration)\n * Returns a new duration value based on onKeyDown event\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @param {string} index - 'startTime or 'stopTime'\n * @param {Event} event - event from onKeyDown\n * @return {object} duration - object containing startTime and stopTime millisecond values\n */\nexport const onDurationKeyDown = (duration, index, event) => {\n  const caretPos = document.activeElement.selectionStart;\n  let newDuration = duration[index];\n\n  switch (event.key) {\n    case 'Enter':\n      document.activeElement.blur();\n      break;\n    case 'Backspace':\n      if (caretPos === newDuration.length && newDuration.slice(-1) === ':') {\n        newDuration = newDuration.slice(0, -1);\n      }\n      break;\n    default:\n      break;\n  }\n\n  return {\n    ...duration,\n    [index]: newDuration,\n  };\n};\n\n/**\n * valueFromDuration(duration)\n * Returns a millisecond duration value from the given 'hh:mm:ss' format string\n * @param {string} duration - duration in 'hh:mm:ss' format\n * @return {number} - duration in milliseconds. Returns null if duration is invalid.\n */\nexport const valueFromDuration = (duration) => {\n  let matches = duration.trim().match(durationMatcher);\n  if (!matches) {\n    return 0;\n  }\n  matches = matches.slice(1).filter(v => v !== undefined);\n  if (matches.length < 3) {\n    for (let i = 0; i <= 3 - matches.length; i++) {\n      matches.unshift(0);\n    }\n  }\n  const [hours, minutes, seconds] = matches.map(x => parseInt(x, 10) || 0);\n  return ((hours * 60 + minutes) * 60 + seconds) * 1000;\n};\n\nexport default {\n  durationWidget,\n  durationString,\n  durationStringFromValue,\n  updateDuration,\n  onDurationChange,\n  onDurationKeyDown,\n  valueFromDuration,\n};\n"],"mappings":"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"}